(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"6d46":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-page",{},[a("div",{staticClass:"row doc-header justify-center items-center"},[a("div",{staticClass:"col-xs-12 col-sm-6 col-lg-4 ",class:e.$q.platform.is.mobile?"":"q-pa-lg"},[a("div",{staticClass:"col-12"},[e.error&&!e.loading?a("div",{staticClass:"col-12"},[a("q-banner",{staticClass:"bg-red text-white",attrs:{rounded:""}},[a("div",{staticClass:"text-h6"},[a("q-icon",{staticClass:"text-white q-mr-md",attrs:{name:"link_off",size:"40px"}}),e._v(" Link quebrado")],1),a("div",{staticClass:"q-ma-lg"},[e._v(e._s(e.error))])])],1):e._e(),e.loading?a("div",{staticClass:"col-12"},[e.error&&""!==e.error?a("q-card",{staticClass:"q-pa-none q-my-md",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"text-center q-py-md"},[a("q-spinner",{attrs:{color:"primary",size:"3rem",thickness:5}}),a("div",{staticClass:"full-width text-center text-primary q-mt-lg "},[e._v("consultando link, aguarde!")])],1)],1):e._e()],1):e._e(),e.error||e.loading?e._e():a("div",{staticClass:"col-12"},[a("q-card",{attrs:{flat:"",bordered:""}},[a("q-card-section",[a("div",{staticClass:"text-left text-h6 text-weight-bold"},[e._v("Link de validação de contato")])]),a("q-separator"),e.retcheck?e._e():a("q-card-section",{staticClass:"text-center"},[a("div",{staticClass:"full-width row items-center"},[a("div",{staticClass:"col-xs-12 col-md-8 text-left text-h6"},["email"===e.tipo?a("div",[e._v(e._s(e.$helpers.emailhide(e.chave)))]):e._e(),"whatsapp"===e.tipo?a("div",[e._v(e._s(e.$helpers.emailphone(e.chave)))]):e._e()]),a("div",{staticClass:"col-xs-12 col-md-4 text-center"},[a("div",{staticStyle:{"max-height":"10em","aspect-ratio":"1/1",margin:"0 auto"}},["whatsapp"===e.tipo?a("lottieinternal",{attrs:{arquivo:"whatsapp"}}):e._e(),"email"===e.tipo?a("lottieinternal",{attrs:{arquivo:"email"}}):e._e()],1)])])]),e.retcheck?e._e():a("q-separator"),e.error||e.loading||!e.retcheck?e._e():a("q-card-section",{staticClass:"text-center"},[a("div",{staticClass:"full-width row items-center"},[a("div",{staticClass:"col-xs-12 col-md-8 text-left text-h6"},[a("div",[e._v(e._s(e.retcheck.msg))])]),a("div",{staticClass:"col-xs-12 col-md-4 text-center"},[e.retcheck.ok?e._e():a("div",[a("q-icon",{attrs:{name:"error",size:"6em",color:"red"}})],1),e.retcheck.ok?a("div",[a("q-icon",{attrs:{name:"check_circle",size:"6em",color:"green"}})],1):e._e()])])]),e.retcheck?e._e():a("q-card-section",{staticClass:"text-center q-py-md"},[a("div",{staticClass:"row justify-center items-center"},[a("div",{staticClass:"col-12"},[a("q-input",{ref:"txtchave",attrs:{outlined:"",type:"phone",label:"Código de validação",maxlength:"8","input-class":"text-h5"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)])]),!e.retcheck&&e.recaptchasitekey&&""!==e.recaptchasitekey?a("q-card-section",{staticClass:"text-center q-py-md"},[a("div",{staticClass:"full-width row justify-center items-center"},[e.recaptchaloading?a("div",[e._v("carregando...")]):e._e(),a("vue-recaptcha",{attrs:{sitekey:e.recaptchasitekey,loadRecaptchaScript:!0},on:{verify:e.verify,render:e.rendered}})],1)]):e._e(),a("q-card-actions",{attrs:{vertical:"",align:"center"}},[e.allowConsulta&&!e.retcheck?a("q-btn",{staticClass:"full-width q-py-sm",attrs:{color:e.allowConsulta?"primary":"grey-6",unelevated:e.allowConsulta,outline:!e.allowConsulta,label:"verificar",icon:"verified_user"},on:{click:e.actVerificar}}):e._e(),e.retcheck&&!e.retcheck.ok?a("q-btn",{staticClass:"full-width q-py-sm",attrs:{color:"red",outline:"",label:"Tentar novamente",icon:"arrow_back"},on:{click:e.inicializa}}):e._e()],1)],1)],1)])])])])],1)},c=[],o=(a("7f7f"),a("a481"),a("a34a")),n=a.n(o),i=(a("96cf"),a("c973")),s=a.n(i),l=a("bc3a"),d=a.n(l),u=a("e096"),h={name:"publico.validacao.contato",components:{VueRecaptcha:u["a"]},data:function(){return{tipo:null,chave:null,token:null,code:null,title:"Validação de contato (e-mail/WhatsApp)",recaptchaloading:!0,recaptchatoken:null,recaptchasitekey:null,loading:!1,error:null,retcheck:null}},meta:function(){return{title:this.title}},mounted:function(){var e=this;return s()(n.a.mark((function t(){var a;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,a.loading=!0,a.recaptchasitekey=a.$configini.RECAPTCHA_KEY?a.$configini.RECAPTCHA_KEY:null,a.recaptchasitekey&&""!==a.recaptchasitekey||(a.recaptchasitekey=null),t.next=6,a.inicializa();case 6:case"end":return t.stop()}}),t)})))()},computed:{allowConsulta:function(){var e=this,t=!0;try{if(e.loading)throw new Error("Em loading");if(e.error)throw new Error("com erro");if(!e.tipo||["email","whatsapp"].indexOf(e.tipo)<0)throw new Error("Tipo de validação incorreta");if(!e.token||""===e.token)throw new Error("Token inválido");if(!e.chave||""===e.chave)throw new Error("Chave de validação incorreta");if(!e.code||e.code.length<4)throw new Error("code de validação incorreta")}catch(a){t=!1}return t}},methods:{inicializa:function(){var e=this;return s()(n.a.mark((function t(){var a;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,t.prev=1,a.loading=!0,a.retcheck=null,a.error=null,a.tipo=a.$route.params.tipo,a.chave=a.$route.query.chave&&""!==a.$route.query.chave?atob(a.$route.query.chave):null,a.token=a.$route.query.token&&""!==a.$route.query.token?a.$route.query.token:null,a.code=a.$route.query.code&&""!==a.$route.query.code?a.$route.query.code:null,a.tipo&&!(["email","whatsapp"].indexOf(a.tipo)<0)){t.next=11;break}throw new Error("Tipo de validação incorreta");case 11:if(a.token&&""!==a.token){t.next=13;break}throw new Error("Token inválido");case 13:if(a.chave&&""!==a.chave){t.next=15;break}throw new Error("Chave de validação incorreta");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](1),a.error=t.t0.message;case 20:return t.prev=20,a.loading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[1,17,20,23]])})))()},rendered:function(e){this.recaptchaloading=!1},verify:function(e){var t=this;return s()(n.a.mark((function a(){return n.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.recaptchatoken=e;case 1:case"end":return a.stop()}}),a)})))()},actClear:function(){var e=this;e.loading=!0,e.dataresumo=null,e.eventos=null,e.dadosconsulta.chave="",e.dadosconsulta.numero="",e.dadosconsulta.cnpjemitente="",e.dadosconsulta.cnpjdestinatario="",e.loading=!1,e.$nextTick((function(){"chave"===e.dadosconsulta.modo?e.$refs.txtchave.focus():e.$refs.txtnumero.focus()}));var t={t:(new Date).getTime()};try{e.$router.replace({name:e.$route.name,query:t,replace:!0,append:!1})}catch(a){console.error(a)}},actVerificar:function(){var e=this;return s()(n.a.mark((function t(){var a;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,t.prev=1,!a.loading){t.next=4;break}throw new Error("Em loading");case 4:if(a.allowConsulta){t.next=6;break}throw new Error("Dados inválidos");case 6:return t.next=8,a.sendvalidacao();case 8:a.retcheck=t.sent,a.retcheck.ok||a.$q.notify({color:"red",icon:"error",position:"center",multiLine:!0,timeout:3e3,message:a.retcheck.msg}),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](1),a.retcheck={ok:!1,msg:t.t0.message},a.$helpers.showDialog({ok:!1,msg:t.t0.message},!0);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))()},sendvalidacao:function(){var e=this;return s()(n.a.mark((function t(){var a,r,c,o;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,r={token:a.token,code:a.code},"email"===a.tipo&&(r["email"]=a.chave),"whatsapp"===a.tipo&&(r["whatsapp"]=a.chave),a.recaptchasitekey&&""!==a.recaptchasitekey&&(r["g-recaptcha-response"]=a.recaptchatoken),c=d.a.create({baseURL:a.$configini.API_URL,withCredentials:!1,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Authorization","Access-Control-Allow-Methods":"GET, POST, OPTIONS, PUT, PATCH, DELETE","Content-Type":"application/json;charset=UTF-8"}}),t.next=8,c.post("v1/public/meiocomunicacao/validar",r).then((function(e){var t=e.data,a={ok:!1,msg:""};return t&&(a.msg=t.msg?t.msg:"",a.ok=t.ok),a})).catch((function(e){return{ok:!1,msg:e.message}}));case 8:return o=t.sent,t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)})))()}}},p=h,v=a("2877"),m=a("9989"),f=a("54e1"),k=a("0016"),w=a("f09f"),g=a("a370"),C=a("0d59"),x=a("eb85"),q=a("27f9"),y=a("4b7e"),_=a("9c40"),b=a("eebe"),$=a.n(b),E=Object(v["a"])(p,r,c,!1,null,null,null);t["default"]=E.exports;$()(E,"components",{QPage:m["a"],QBanner:f["a"],QIcon:k["a"],QCard:w["a"],QCardSection:g["a"],QSpinner:C["a"],QSeparator:x["a"],QInput:q["a"],QCardActions:y["a"],QBtn:_["a"]})}}]);