(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"35c6":function(e,t,a){"use strict";a("a481");(function(){var e,t=[].slice;e=function(){var e,a,n,r,o,i,s;return o=arguments.length>=1?t.call(arguments,0):[],i=/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,o.length>0?(r=o[0],e=r["callback"],n=function(){var e;for(a in e=[],r)s=r[a],"callback"!==a&&e.push(" "+a+"='"+s+"'");return e}().join(""),this.replace(i,(function(t,a,r){var o;return o=("function"===typeof e?e(r):void 0)||"<a href='"+r+"'"+n+">"+r+"</a>",""+a+o}))):this.replace(i,"$1<a href='$2'>$2</a>")},String.prototype["autoLink"]=e}).call(void 0)},"6c46":function(e,t,a){"use strict";var n=a("a34a"),r=a.n(n),o=(a("96cf"),a("c973")),i=a.n(o),s=a("970b"),c=a.n(s),l=a("5bc3"),d=a.n(l),u=a("2b0e"),p=function(){function e(t){c()(this,e),this.limpardados(),t&&this.cloneFrom(t)}return d()(e,[{key:"limpardados",value:function(){var e=i()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.id=null,this.codigoacesso=null,this.situacao=null,this.encerrado=!1,this.prioridade=1,this.pendentecliente=!1,this.problemareclamado=null,this.dtabertura=null,this.categoria=null,this.classificacao=null,this.fase=null,this.ultimainteracao=null,this.contato_leitura_at=null,delete this.prazoprevisao,delete this.dtfechamento,delete this.contato,delete this.cliente,delete this.interacoes;case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cloneFrom",value:function(){var e=i()(r.a.mark((function e(t){var a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=this,a.limpardados(),t){e.next=4;break}return e.abrupt("return");case 4:"undefined"!==typeof t.id&&(this.id=t.id),"undefined"!==typeof t.codigoacesso&&(this.codigoacesso=t.codigoacesso),"undefined"!==typeof t.prioridade&&(this.prioridade=t.prioridade),"undefined"!==typeof t.situacao&&(this.situacao=t.situacao),this.encerrado=!!this.situacao&&"Encerrada"===this.situacao,"undefined"!==typeof t.problemareclamado&&(this.problemareclamado=t.problemareclamado),a.pendentecliente=u["a"].prototype.$helpers.toBool(t.pendentecliente),"undefined"!==typeof t.dtabertura&&(this.dtabertura=t.dtabertura),"undefined"!==typeof t.dtfechamento&&(this.dtfechamento=t.dtfechamento),"undefined"!==typeof t.prazoprevisao&&(this.prazoprevisao=t.prazoprevisao),"undefined"!==typeof t.categoria&&(this.categoria=t.categoria),"undefined"!==typeof t.classificacao&&(this.classificacao=t.classificacao),"undefined"!==typeof t.fase&&(this.fase=t.fase),"undefined"!==typeof t.ultimainteracao&&(this.ultimainteracao=t.ultimainteracao),"undefined"!==typeof t.contato_leitura_at&&(this.contato_leitura_at=t.contato_leitura_at),"undefined"!==typeof t.contato&&(this.contato=t.contato),"undefined"!==typeof t.cliente&&(this.cliente=t.cliente),"undefined"!==typeof t.interacoes&&(this.interacoes=t.interacoes);case 22:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"find",value:function(){var e=i()(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this,a.limpardados(),e.next=4,u["a"].prototype.$axios.get("v1/painelcliente/atendimentos/atendimento/"+t).then((function(e){var t=e.data,n={ok:!1,msg:""};return t&&(n.msg=t.msg?t.msg:"",t.ok&&(n.ok=!0,a.cloneFrom(t.data))),n})).catch((function(e){return u["a"].prototype.$helpers.errorReturn(e)}));case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"saveAdd",value:function(){var e=i()(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,e.prev=1,t.problemareclamado){e.next=4;break}throw new Error("Nenhum descrição na solicitação de atendimento");case 4:if(t.problemareclamado&&!(t.problemareclamado.length<10)){e.next=6;break}throw new Error("Descrição na solicitação deve ter no mínimo 10 caracteres");case 6:if("undefined"!==typeof t.prioridade){e.next=8;break}throw new Error("Prioridade inválida");case 8:if(!(t.prioridade<0)){e.next=10;break}throw new Error("Prioridade inválida");case 10:if(!(t.prioridade>3)){e.next=12;break}throw new Error("Prioridade inválida");case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",{ok:!1,msg:e.t0.message,warning:!1});case 17:return a={mensagem:t.problemareclamado,prioridade:t.prioridade},e.next=20,u["a"].prototype.$axios.post("v1/painelcliente/atendimentos/atendimento/add",a).then((function(e){var t=e.data,a={ok:!1,msg:""};return t&&(a.msg=t.msg?t.msg:"",a.ok=t.ok,a.id=t.id),a})).catch((function(e){return u["a"].prototype.$helpers.errorReturn(e)}));case 20:return n=e.sent,e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"sendInteracao",value:function(){var e=i()(r.a.mark((function e(t){var a,n,o;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this,n={mensagem:t},e.next=4,u["a"].prototype.$axios.post("v1/painelcliente/atendimentos/atendimento/"+a.id+"/interacao/add",n).then((function(e){var t=e.data,a={ok:!1,msg:""};return t&&(a.msg=t.msg?t.msg:"",a.ok=t.ok,a.data=t.data),a})).catch((function(e){return u["a"].prototype.$helpers.errorReturn(e)}));case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendLido",value:function(){var e=i()(r.a.mark((function e(){var t,a,n,o,i=arguments;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=!(i.length>0&&void 0!==i[0])||i[0],a=this,n={lido:t?"lido":"naoligo"},e.next=5,u["a"].prototype.$axios.post("v1/painelcliente/atendimentos/atendimento/"+a.id+"/lido",n).then((function(e){var t=e.data,a={ok:!1,msg:""};return t&&(a.msg=t.msg?t.msg:"",a.ok=t.ok),a})).catch((function(e){return u["a"].prototype.$helpers.errorReturn(e)}));case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"lido",get:function(){return this.contato_leitura_at}}]),e}();t["a"]=p},c7ce:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-page",{},[a("div",{staticClass:"full-width header-top-bg bg-primary shadow-up-21"}),a("div",{staticClass:"row doc-header full-width"},[a("div",{staticClass:"col-xs-12 col-md-10 offset-md-1 col-lg-8 offset-lg-2 ",class:e.$q.screen.lt.sm?"":"q-pa-lg"},[e.error&&!e.posting?a("q-card",{staticClass:"bg-white ",class:e.$q.platform.is.mobile?"q-ma-sm":"",attrs:{flat:"",bordered:""}},[e.error?a("q-card-section",[a("q-banner",{staticClass:"bg-red text-white",attrs:{rounded:""},scopedSlots:e._u([{key:"action",fn:function(){return[a("q-btn",{attrs:{flat:"",color:"white",label:"ok"},on:{click:function(t){e.error=null}}})]},proxy:!0}],null,!1,2736383311)},[e._v("\n              "+e._s(e.error)+"\n              ")])],1):e._e()],1):e._e(),a("q-card",{staticClass:"bg-white q-pb-md ",class:e.$q.platform.is.mobile?"q-ma-sm":"",attrs:{flat:"",bordered:""}},[a("q-card-section",[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-xs-12"},[a("div",[e._v("Descreve sua necessidade de atendimento")]),a("q-input",{ref:"txtmensagem",staticClass:"full-width q-my-sm",attrs:{outlined:"",placeholder:"Mensagem",type:"textarea",disable:e.posting,autogrow:"","input-style":"min-height: 150px",counter:"",hint:"Obrigatório no mínimo 10 caracteres"},model:{value:e.atendimento.problemareclamado,callback:function(t){e.$set(e.atendimento,"problemareclamado",t)},expression:"atendimento.problemareclamado"}})],1),a("div",{staticClass:"col-xs-12 "},[a("div",{staticClass:"q-mt-md"},[e._v("Como você entende a necessidade da sua solicitação de atendimento")]),a("q-select",{staticClass:"q-my-sm",attrs:{outlined:"","emit-value":"","stack-label":"","map-options":"",dense:!e.$q.platform.is.mobile,disable:e.posting,hint:"A definição de prioridade poderá ser alterada após a análise técnica",options:[{value:1,label:"Normal",color:"green",hint:"Novas solicitações ou erros que não afetam diretamente o processo da empresa"},{value:2,label:"Média",color:"yellow-10",hint:"Quando há erros ou necessidade que funções secundárias. Não paralisa o processo de uso"},{value:3,label:"Alta",color:"red-10",hint:"Quando a situação está totalmente paralisada ou alguma função primária está afetando processo de uso"}]},scopedSlots:e._u([{key:"selected-item",fn:function(t){return[a("div",{staticClass:"text-no-wrap ellipsis"},[t.opt.color?a("q-icon",{staticClass:"q-mr-sm",attrs:{name:"circle",size:"16px",color:t.opt.color}}):e._e(),e._v("\n                    "+e._s(t.opt.label)+"\n                    "),a("q-icon",{attrs:{name:"arrow_right",size:"20px",color:"grey-5"}}),e._v("\n                    "+e._s(t.opt.hint)+"\n\n                    ")],1)]}},{key:"option",fn:function(t){return[a("q-item",e._g(e._b({staticClass:"border-bottom-separator",attrs:{dense:""}},"q-item",t.itemProps,!1),t.itemEvents),[a("q-item-section",{attrs:{avatar:""}},[t.opt.color?a("q-icon",{staticClass:"q-mr-sm",attrs:{name:"circle",size:"12px",color:t.opt.color}}):e._e()],1),a("q-item-section",[a("q-item-label",[e._v(e._s(t.opt.label))]),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.opt.hint))])],1),a("q-tooltip",{attrs:{delay:500}},[e._v("\n                        "+e._s(t.opt.hint)+"\n                      ")])],1)]}}]),model:{value:e.atendimento.prioridade,callback:function(t){e.$set(e.atendimento,"prioridade",t)},expression:"atendimento.prioridade"}})],1)])]),a("q-card-section",[a("q-banner",{staticClass:"bg-light-blue-1 text-primary full-width",attrs:{rounded:""}},[a("q-icon",{staticClass:"q-mr-md",attrs:{name:"attach_file",size:"20px"}}),e._v("Após inserir a solicitação, será permitido a inclusão de anexos ou mais informações!\n            ")],1)],1),e.$q.screen.lt.sm?e._e():a("q-card-section",{staticClass:"row q-gutter-x-md"},[a("q-btn",{class:e.$q.screen.lt.sm?"full-width":"",attrs:{color:"primary",icon:"check",unelevated:"",label:"Incluir atendimento",loading:e.posting,disable:e.posting},on:{click:e.actSave}}),a("q-btn",{attrs:{color:"grey-4","text-color":"grey-9",icon:"arrow_back",unelevated:"",label:"Voltar"},on:{click:function(t){return e.$router.go(-1)}}})],1)],1),a("q-page-sticky",{attrs:{position:"top",expand:""}},[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-btn",{attrs:{flat:"",round:"",icon:"arrow_back"},on:{click:function(t){return e.$router.go(-1)}}}),a("q-toolbar-title",[e._v("\n              Novo atendimento\n            ")]),a("q-btn",{attrs:{stretch:"",label:"Incluir",flat:"",loading:e.posting,disable:e.posting,dense:""},on:{click:e.actSave}})],1)],1),e.$q.screen.lt.sm?a("q-page-sticky",{attrs:{position:"bottom",expand:""}},[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-btn",{class:e.$q.screen.lt.sm?"full-width q-pa-md":"",attrs:{color:"primary",icon:"check",unelevated:"",label:"Incluir atendimento",stretch:"",loading:e.posting,disable:e.posting},on:{click:e.actSave}})],1)],1):e._e()],1)])])],1)},r=[],o=a("a34a"),i=a.n(o),s=(a("96cf"),a("c973")),c=a.n(s),l=(a("35c6"),a("6c46")),d={name:"atendimentos.listagem",components:{},computed:{usuariologado:function(){var e=this,t=null;return e.$store.state.usuario.logado&&e.$store.state.usuario.usuario&&(t=e.$store.state.usuario.usuario),t}},data:function(){var e=new l["a"];return{atendimento:e,posting:!1,error:null}},activated:function(){var e=this;return c()(i.a.mark((function t(){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.$nextTick((function(){a.$refs.txtmensagem.$el.focus()}));case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return c()(i.a.mark((function t(){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.atendimento.limpardados(),a.atendimento.prioridade=1;case 3:case"end":return t.stop()}}),t)})))()},methods:{actSave:function(){var e=this;return c()(i.a.mark((function t(){var a,n,r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,a.error=null,!a.posting){t.next=4;break}return t.abrupt("return");case 4:return n=a.$helpers.dialogProgress(a,"Registrando, aguarde!"),t.prev=5,a.posting=!0,a.error=null,t.next=10,a.atendimento.saveAdd();case 10:r=t.sent,r.ok?(a.atendimento.limpardados(),a.$eventbus.$emit("usuariodash",!1),a.$q.notify({message:"Atendimento registrado com sucesso!",color:"green",timeout:2e3,position:"center",icon:"check"}),a.$nextTick((function(){a.error=null,a.loading=!0,a.$router.push({name:"atendimentos.atendimento",params:{id:r.id}}),a.loading=!1}))):(a.error=r.msg,a.$q.notify({message:"Atendimento não foi registrado",color:"red",timeout:3e3,position:"center",caption:a.error,actions:[{label:"OK",color:"white",handler:function(){a.error=null}}]})),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](5),a.posting=!1,a.error=t.t0.message;case 18:return t.prev=18,a.posting=!1,n.hide(),t.finish(18);case 22:case"end":return t.stop()}}),t,null,[[5,14,18,22]])})))()}}},u=d,p=a("2877"),m=a("9989"),f=a("f09f"),h=a("a370"),v=a("54e1"),g=a("9c40"),b=a("27f9"),w=a("ddd8"),k=a("0016"),y=a("66e5"),q=a("4074"),x=a("0170"),_=a("05c0"),$=a("de5e"),C=a("65c6"),Q=a("6ac5"),S=a("eebe"),A=a.n(S),z=Object(p["a"])(u,n,r,!1,null,null,null);t["default"]=z.exports;A()(z,"components",{QPage:m["a"],QCard:f["a"],QCardSection:h["a"],QBanner:v["a"],QBtn:g["a"],QInput:b["a"],QSelect:w["a"],QIcon:k["a"],QItem:y["a"],QItemSection:q["a"],QItemLabel:x["a"],QTooltip:_["a"],QPageSticky:$["a"],QToolbar:C["a"],QToolbarTitle:Q["a"]})}}]);