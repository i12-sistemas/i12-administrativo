(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"4bbf":function(e,t,a){},db9a:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-card",{staticClass:"full-width",attrs:{flat:""}},[e.checado?e._e():a("q-card-section",{staticClass:"q-pa-none"},[a("q-form",{ref:"myForm",on:{submit:function(t){return t.preventDefault(),e.actCheckCode(t)}}},[a("div",{staticClass:"row flex-center q-pb-md q-px-md full-width"},[a("q-card",{staticClass:"full-width q-pa-none",attrs:{flat:"",bordered:!1}},[a("q-card-section",{staticClass:"q-pa-none q-pt-sm "},[a("div",{staticClass:"row justify-center content-start text-subtitle1"},[a("q-icon",{staticClass:"q-pr-sm",attrs:{name:"check_circle",color:"positive",size:"24px"}}),e._v("\n              Confira o código enviado por e-mail\n            ")],1),a("div",{staticClass:"row wrap justify-center q-pb-lg content-start text-subtitle1 text-weight-bold"},[e._v("\n              "+e._s(e.username)+"\n            ")]),a("div",{staticClass:"row wrap justify-start content-start text-body"},[a("div",[e._v("Acesse sua caixa de e-mail e siga as instruções para concluir a alteração de senha!")]),a("div",{staticClass:"text-caption text-left"},[e._v("* Não esqueça de conferir na sua caixa de Spam.")])])]),a("q-card-section",{staticClass:"text-weight-bold text-center rounded-borders bg-light-green-1 text-green q-my-md q-pa-none q-py-sm"},[e._v("\n              O código expira em 1 hora!\n          ")]),a("q-card-section",{staticClass:"q-pa-none"},[a("q-input",{ref:"txtcodenumber",staticClass:"codenumber",attrs:{outlined:"",color:"primary","bg-color":"white","label-color":"grey-10",label:"Código","stack-label":"",type:"number"},model:{value:e.codenumber,callback:function(t){e.codenumber=t},expression:"codenumber"}})],1),a("q-card-actions",{attrs:{align:"center"}},[a("q-btn",{staticClass:"full-width",attrs:{unelevated:"",color:"primary","text-color":"white",loading:e.sending,type:"submit",label:"Validar código"}})],1),a("q-card-actions",{attrs:{align:"center"}},[a("q-btn",{staticClass:"full-width",attrs:{unelevated:"",color:"grey-3","text-color":"black",to:{name:"login.usuario"},disable:e.sending,label:"Login de acesso"}})],1),a("q-card-section",[a("p",{staticClass:"text-caption text-center"},[e._v("\n              Seu IP esta sendo registrado!\n            ")])])],1)],1)])],1),e.checado?a("q-card-section",{staticClass:"q-pa-none"},[a("q-form",{ref:"myFormChecado",on:{submit:function(t){return t.preventDefault(),e.actChangePwd(t)}}},[a("div",{staticClass:"row flex-center q-pb-md q-px-md full-width"},[a("q-card",{staticClass:"full-width",attrs:{flat:"",bordered:!1}},[a("q-card-section",{staticClass:"q-pa-none"},[a("div",{staticClass:"row justify-center q-pt-sm content-start text-subtitle1"},[a("q-icon",{staticClass:"q-pr-sm",attrs:{name:"check_circle",color:"positive",size:"24px"}}),e._v("\n              Código verificado para a conta\n            ")],1),a("div",{staticClass:"row wrap justify-center q-pt-lg content-start text-subtitle1 text-weight-bold"},[e._v("\n              "+e._s(e.datatoken.username)+"\n            ")]),a("div",{staticClass:"row wrap justify-center content-start text-body"},[e._v("\n              Informe sua nova senha\n            ")])]),a("q-card-section",[a("q-input",{ref:"password1",attrs:{outlined:"",color:"primary","bg-color":"white","label-color":"grey-10",loading:e.sending,disable:e.sending,label:"Senha","stack-label":"",type:"password"},model:{value:e.password1,callback:function(t){e.password1=t},expression:"password1"}})],1),a("q-card-section",[a("q-input",{ref:"password2",attrs:{outlined:"",color:"primary","bg-color":"white","label-color":"grey-10",loading:e.sending,disable:e.sending,label:"Confirmação de senha","stack-label":"",type:"password"},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}})],1),a("q-card-actions",{staticClass:"row wrap justify-between q-px-md content-start",attrs:{align:"center"}},[a("q-btn",{staticClass:"full-width",attrs:{unelevated:"",color:"primary","text-color":"white",loading:e.sending,type:"submit",label:"Alterar senha"}})],1),a("q-card-actions",{staticClass:"row wrap justify-between q-px-md content-start",attrs:{align:"center"}},[a("q-btn",{staticClass:"full-width",attrs:{color:"grey-2","text-color":"black",icon:"arrow_back",unelevated:"",to:{name:"login.usuario"},label:"Login de acesso",disable:e.sending}})],1),a("q-card-section",[a("p",{staticClass:"text-caption text-center"},[e._v("\n              Seu IP esta sendo registrado!\n            ")])])],1)],1)])],1):e._e()],1)],1)},n=[],s=a("a34a"),o=a.n(s),c=(a("96cf"),a("c973")),i=a.n(c),d=a("bc3a"),u=a.n(d),l={data:function(){return{email:"",username:"",codenumber:"",checado:!1,datatoken:null,sending:!1,password1:"",password2:""}},computed:{},mounted:function(){var e=this;return i()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.$route.query&&(a.$route.query.username&&(a.username=a.$route.query.username),a.$route.query.codenumber&&(a.codenumber=a.$route.query.codenumber)),""!==a.username&&""!==a.codenumber&&setTimeout((function(){a.actCheckCode()}),500);case 3:case"end":return t.stop()}}),t)})))()},methods:{actChangePwd:function(e){var t=this;return i()(o.a.mark((function e(){var a,r;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t,""!==a.password1){e.next=4;break}return a.$refs.txtpassword1.$el.focus(),e.abrupt("return");case 4:if(""!==a.password2){e.next=7;break}return a.$refs.password2.$el.focus(),e.abrupt("return");case 7:return a.sending=!0,e.next=10,a.sendChangePwd();case 10:r=e.sent,r.ok?(""!==r.msg&&a.$q.notify({message:"Senha alterada!",color:"positive",actions:[{label:"OK",color:"white",handler:function(){}}]}),a.$router.push({name:"login.usuario"})):a.actShowError("Acesso restrito",r.msg,4e3),a.sending=!1;case 13:case"end":return e.stop()}}),e)})))()},sendChangePwd:function(){var e=this;return i()(o.a.mark((function t(){var a,r,n,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,t.prev=1,a.datatoken){t.next=4;break}throw new Error("Código não checado");case 4:if(a.checado){t.next=6;break}throw new Error("Código não checado");case 6:if(""!==a.datatoken.username){t.next=8;break}throw new Error("Usuário inválido");case 8:if(""!==a.datatoken.codenumber){t.next=10;break}throw new Error("Código não informado");case 10:if(""!==a.datatoken.token){t.next=12;break}throw new Error("Token não informado");case 12:if(""!==a.password1){t.next=14;break}throw new Error("Senha inválida");case 14:if(""!==a.password2){t.next=16;break}throw new Error("Confirmação de senha inválida");case 16:if(a.password2===a.password1){t.next=18;break}throw new Error("Senha e confirmação estão diferentes");case 18:t.next=23;break;case 20:return t.prev=20,t.t0=t["catch"](1),t.abrupt("return",{ok:!1,msg:t.t0.message});case 23:return r={username:a.datatoken.username,codenumber:a.datatoken.codenumber,token:a.datatoken.token,pwd:a.password1},n=u.a.create({baseURL:a.$configini.API_URL,withCredentials:!1,headers:{"x-auth-uuid":a.$store.state.usuario.uuid,"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Authorization","Access-Control-Allow-Methods":"GET, POST, OPTIONS, PUT, PATCH, DELETE","Content-Type":"application/json;charset=UTF-8"}}),t.next=27,n.post("v1/painelcliente/login/usuario/resetpwd/changepwd",r).then((function(e){var t=e.data;return t})).catch((function(e){var t=e;return t=e.response?"Code: "+e.response.status+" - "+e.response.data.message:e.message,{ok:!1,msg:"Falha ao consultar servidor online: "+t}}));case 27:return s=t.sent,t.abrupt("return",s);case 29:case"end":return t.stop()}}),t,null,[[1,20]])})))()},closeApp:function(){return i()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:navigator.app.exitApp();case 1:case"end":return e.stop()}}),e)})))()},actCheckCode:function(e){var t=this;return i()(o.a.mark((function e(){var a,r;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t,""!==a.code){e.next=4;break}return a.$refs.txtcodenumber.$el.focus(),e.abrupt("return");case 4:return a.sending=!0,e.next=7,a.sendCheckCode();case 7:r=e.sent,r.ok?a.checado=!0:a.actShowError("Acesso restrito",r.msg,4e3),a.sending=!1;case 10:case"end":return e.stop()}}),e)})))()},actShowError:function(e,t,a){var r=this,n=r.$q.dialog({title:e,message:t}).onDismiss((function(){clearTimeout(s),r.codenumber=""})),s=setTimeout((function(){n.hide()}),a)},sendCheckCode:function(){var e=this;return i()(o.a.mark((function t(){var a,r,n,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,t.prev=1,""!==a.username){t.next=4;break}throw new Error("Usuário inválido");case 4:if(""!==a.codenumber){t.next=6;break}throw new Error("Código não informado");case 6:t.next=11;break;case 8:return t.prev=8,t.t0=t["catch"](1),t.abrupt("return",{ok:!1,msg:t.t0.message});case 11:return r={username:a.username,codenumber:a.codenumber},n=u.a.create({baseURL:a.$configini.API_URL,withCredentials:!1,headers:{"x-auth-uuid":a.$store.state.usuario.uuid,"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Authorization","Access-Control-Allow-Methods":"GET, POST, OPTIONS, PUT, PATCH, DELETE","Content-Type":"application/json;charset=UTF-8"}}),t.next=15,n.post("v1/painelcliente/login/usuario/resetpwd/checkcode",r).then((function(e){var t=e.data;return t})).catch((function(e){var t=e;return t=e.response?"Code: "+e.response.status+" - "+e.response.data.message:e.message,{ok:!1,msg:"Falha ao consultar servidor online: "+t}}));case 15:return s=t.sent,s.ok&&(a.checado=!0,a.datatoken=s.data),t.abrupt("return",s);case 18:case"end":return t.stop()}}),t,null,[[1,8]])})))()}}},p=l,w=(a("f4b1"),a("2877")),f=a("f09f"),m=a("a370"),b=a("0378"),h=a("0016"),g=a("27f9"),v=a("4b7e"),C=a("9c40"),x=a("eebe"),k=a.n(x),q=Object(w["a"])(p,r,n,!1,null,"66a35cdf",null);t["default"]=q.exports;k()(q,"components",{QCard:f["a"],QCardSection:m["a"],QForm:b["a"],QIcon:h["a"],QInput:g["a"],QCardActions:v["a"],QBtn:C["a"]})},f4b1:function(e,t,a){"use strict";var r=a("4bbf"),n=a.n(r);n.a}}]);