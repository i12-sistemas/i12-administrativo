(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{d289:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-page",{},[a("div",{staticClass:"full-width header-top-bg bg-primary shadow-up-21"}),a("div",{staticClass:"row doc-header"},[a("div",{staticClass:"col-sm-12",class:e.$q.platform.is.mobile?"":"q-pa-lg"},[a("q-card",{staticClass:"bg-white ",class:e.$q.platform.is.mobile?"q-ma-sm":"",attrs:{flat:"",bordered:""}},[e.error?a("q-card-section",[a("q-banner",{staticClass:"bg-negative text-white"},[e._v(e._s(e.error))])],1):e._e(),a("q-card-section",[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-xs-12 col-md-4"},[a("q-input",{attrs:{outlined:"",debounce:"700",placeholder:"Informe qualquer Informação para pesquisar",label:"Procurar",clearable:"","stack-label":"",dense:!e.$q.platform.is.mobile,hint:"Ex.: CNPJ, nome do cliente e etc..."},on:{input:function(t){return e.refreshData(null,!0)}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-btn",{attrs:{flat:"",color:"primary",icon:"search",loading:e.loading,round:"",dense:""},on:{click:function(t){return e.refreshData(null,!1)}}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),a("div",{staticClass:"col-xs-12 col-md-4"},[a("q-select",{staticClass:"q-mr-xs",attrs:{label:"Status",outlined:"","emit-value":"","stack-label":"","map-options":"",dense:!e.$q.platform.is.mobile,options:[{value:"todos",label:"Todos"},{value:"expirado",label:"Expirados"},{value:"bloqueado",label:"Bloqueados"},{value:"naoaplicado",label:"Não aplicados"},{value:"semlicenca",label:"Sem licença"}]},on:{input:function(t){return e.refreshData(null)}},model:{value:e.filterstatus,callback:function(t){e.filterstatus=t},expression:"filterstatus"}})],1)])])],1),e.rows&&e.rows.length>0?a("q-card",{staticClass:"bg-white q-mt-md",attrs:{flat:"",bordered:!e.$q.platform.is.mobile,square:e.$q.platform.is.mobile}},[e.$q.platform.is.mobile?a("q-separator"):e._e(),a("q-card-section",{staticClass:"q-pa-none"},[e.$q.platform.is.mobile?a("div",{staticStyle:{"max-width":"100vw"}},[a("q-list",[a("q-infinite-scroll",{attrs:{offset:250,disable:!e.dataset.temmaisregistros},on:{load:e.onLoadInfinite},scopedSlots:e._u([{key:"loading",fn:function(){return[a("div",{staticClass:"row justify-center q-my-md"},[a("div",{staticClass:"full-width text-center"},[a("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)])]},proxy:!0}],null,!1,2875690748)},[e._l(e.rows,(function(t,n){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:n,class:e.$helpers.isOdd(n)?"":"bg-grey-2",attrs:{clickable:""},on:{click:function(a){return e.actAddLicencaDialog(t)}}},[a("q-item-section",[a("q-item-label",{staticClass:"text-subtitle2",attrs:{lines:"1"}},[e._v(e._s(t.cliente.nome))]),t.datavencimento?a("q-item-label",[e._v("\n                        "+e._s((t.expirado?"Expirado ":"Expira")+" "+e.$helpers.datetimeRelativeToday(t.datavencimento)+" - "+e.$helpers.dateToBR(t.datavencimento))+"\n                      ")]):e._e(),t.databloqueio?a("q-item-label",[e._v("\n                        "+e._s((t.bloqueado?"Bloqueado ":"Bloqueio")+" "+e.$helpers.datetimeRelativeToday(t.databloqueio)+" - "+e.$helpers.dateToBR(t.databloqueio))+"\n                      ")]):e._e(),t.datavencimento?a("q-item-label",[t.dataativacao?a("div",{staticClass:"text-caption"},[e._v("\n                          Ativado: "+e._s(e.$helpers.datetimeToBR(t.dataativacao))+" - "+e._s(e.$helpers.datetimeRelativeToday(t.dataativacao))+"\n                        ")]):a("div",[e._v("Nunca foi ativado")])]):e._e(),t.datavencimento?e._e():a("q-item-label",[e._v("\n                        Sem licença gerada!\n                      ")]),t.cliente&&t.cliente.saldovencido?a("q-item-label",{staticClass:"text-red text-weight-bold"},[a("div",[e._v("Cliente com débito em atraso")]),a("div",[e._v(e._s(e.$helpers.formatRS(t.cliente.saldovencido,"R$",2))+" "),t.cliente.saldovencidodesde?a("span",[e._v("desde "+e._s(e.$helpers.dateToBR(t.cliente.saldovencidodesde)))]):e._e()])]):e._e()],1),a("q-item-section",{staticClass:"text-center",attrs:{side:""}},[a("q-item-label",{staticClass:"full-width text-center "},[t.bloqueado||!t.datavencimento?a("q-avatar",{attrs:{size:"3em","font-size":"0.5em",color:"red","text-color":"white"}},[e._v("\n                          "+e._s(t.databloqueio?e.$helpers.diffDate(t.databloqueio,"","days")+1:"?")+"\n                        ")]):e._e(),t.datavencimento&&t.expirado&&!t.bloqueado?a("q-avatar",{attrs:{size:"3em","font-size":"0.5em",color:"yellow-10","text-color":"white"}},[e._v("\n                          "+e._s(e.$helpers.diffDate("",t.databloqueio,"days")-1)+"\n                        ")]):e._e(),t.expirado||t.bloqueado||!t.datavencimento?e._e():a("q-avatar",{attrs:{size:"3em","font-size":"0.5em",color:"green","text-color":"white"}},[e._v("\n                          "+e._s(e.$helpers.diffDate("",t.datavencimento,"days")+1)+"\n                        ")])],1),a("q-item-label",{staticStyle:{"min-width":"90px"}},[e._v(e._s(t.datavencimento?t.status:"Sem licença"))])],1)],1)})),a("q-separator"),a("q-item",{staticClass:"bg-grey-2 text-grey-7"},[a("q-item-section",[a("q-item-label",[a("div",{staticClass:"full-width text-center"},[e._v("Exibindo "+e._s(e.dataset.infopagination)+" cliente(s)")])])],1)],1)],2)],1)],1):a("div",{staticStyle:{"max-width":"100vw"}},[a("q-table",{attrs:{data:e.rows,columns:e.columns,dense:!e.$q.platform.is.mobile,flat:"",loading:e.loading,color:"primary",id:"sticky-table",pagination:e.dataset.pagination,"row-key":"id","rows-per-page-options":e.$qtable.rowsperpageoptions},on:{"update:pagination":function(t){return e.$set(e.dataset,"pagination",t)},request:e.refreshData},scopedSlots:e._u([{key:"body-cell-cliente",fn:function(t){return[a("q-td",{staticClass:"cursor-pointer",attrs:{props:t},on:{click:function(a){return e.actAddLicencaDialog(t.row)}}},[a("div",{staticClass:"cursor-pointer",class:t.row.cliente.ativo?"":"text-red"},[a("div",{staticClass:"ellipsis"},[t.row.cliente.ativo?e._e():a("span",{staticClass:"bg-red-1 text-red rounded-borders q-pa-xs text-caption"},[e._v("Inativo")]),a("span",[e._v("\n                              "+e._s(t.row.cliente.fantasia&&""!==t.row.cliente.fantasia?t.row.cliente.fantasia:t.row.cliente.nome)+"\n                            ")]),t.row.cliente.fantasia&&""!==t.row.cliente.fantasia?a("span",{staticClass:"q-ml-md text-caption text-grey-7"},[e._v(e._s(e.$helpers.strEllipsis(t.row.cliente.nome,30)))]):e._e()])]),a("q-tooltip",{attrs:{delay:700}},[a("div",[e._v(e._s(t.row.cliente.fantasia))]),a("div",[e._v(e._s(t.row.cliente.nome))]),a("div",[e._v("Documento: "+e._s(t.row.cliente.doc))]),a("div",[e._v("Id: "+e._s(t.row.cliente.id))])])],1)]}},{key:"body-cell-saldovencido",fn:function(t){return[a("q-td",{staticClass:"cursor-pointer",class:t.row.cliente&&t.row.cliente.saldovencido?"bg-red-1 text-red":"",attrs:{props:t},on:{click:function(a){return e.actAddLicencaDialog(t.row)}}},[t.row.cliente&&t.row.cliente.saldovencido?a("div",{staticClass:"cursor-pointer text-weight-bold"},[e._v("\n                          "+e._s(e.$helpers.formatRS(t.row.cliente.saldovencido,"",2))+"\n                          "),a("q-tooltip",{attrs:{delay:700}},[a("div",[e._v("Pendência financeira")]),a("div",[e._v("Débito em atraso: "+e._s(e.$helpers.formatRS(t.row.cliente.saldovencido,"R$ ",2)))]),t.row.cliente.saldovencidodesde?a("div",[e._v("desde "+e._s(e.$helpers.dateToBR(t.row.cliente.saldovencidodesde)))]):e._e()])],1):a("div",{staticClass:"text-grey-4"},[e._v("0\n                        "),a("q-tooltip",{attrs:{delay:700}},[e._v("Nenhuma pendência financeira")])],1)])]}},{key:"body-cell-dataativacao",fn:function(t){return[a("q-td",{attrs:{props:t}},[t.row.dataativacao?a("div",[a("div",{},[e._v(e._s(e.$helpers.datetimeRelativeToday(t.row.dataativacao)))]),a("q-tooltip",{attrs:{delay:700}},[a("div",[e._v(e._s(e.$helpers.datetimeToBR(t.row.dataativacao)))])])],1):a("div",[e._v("\n                        -\n                        "),a("q-tooltip",{attrs:{delay:700}},[e._v("\n                          "+e._s(t.row.databloqueio?"Licença ainda não foi ativada":"Nenhuma licença gerada")+"\n                        ")])],1)])]}},{key:"body-cell-datavencimento",fn:function(t){return[a("q-td",{class:t.row.expirado?"bg-red-1 text-red text-weight-bold":"",attrs:{props:t}},[t.row.datavencimento?a("div",[a("div",[e._v(e._s(e.$helpers.dateToBR(t.row.datavencimento)))])]):a("div",[e._v("\n                        Sem licença\n                      ")])])]}},{key:"body-cell-databloqueio",fn:function(t){return[a("q-td",{class:t.row.bloqueado?"bg-red-1 text-red text-weight-bold":"",attrs:{props:t}},[t.row.databloqueio?a("div",[a("div",[e._v(e._s(e.$helpers.dateToBR(t.row.databloqueio)))])]):a("div",[e._v("\n                        Sem licença\n                      ")])])]}},{key:"body-cell-diasrestantes",fn:function(t){return[a("q-td",{class:t.row.bloqueado?"bg-red-1 text-red text-weight-bold":"",attrs:{props:t}},[t.row.databloqueio?a("div",[a("div",[e._v(e._s(t.row.diasrestantes)+" dia(s)")])]):a("div",[e._v("\n                        Sem licença\n                      ")])])]}}],null,!1,1072610392)})],1)])],1):e._e(),a("q-page-sticky",{attrs:{position:"top",expand:""}},[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-btn",{attrs:{flat:"",dense:"",round:"","aria-label":"Menu",icon:"menu"},on:{click:function(t){return e.$store.dispatch("homedashboard/togglemenu")}}}),a("q-btn",{attrs:{flat:"",round:"",icon:"arrow_back"},on:{click:function(t){return e.$router.go(-1)}}}),e.$q.platform.is.mobile?e._e():a("q-separator",{attrs:{vertical:"",inset:"",spaced:""}}),a("q-toolbar-title",[e._v("Licenças")]),a("q-btn",{attrs:{icon:"search",label:e.$q.platform.is.mobile?"":"Consultar",round:e.$q.platform.is.mobile,flat:"",loading:e.loading},on:{click:function(t){return e.refreshData(null,!1)}}})],1)],1)],1)])])],1)},i=[],r=(a("7f7f"),a("a481"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("7514"),a("28a5"),a("a34a")),o=a.n(r),s=(a("96cf"),a("c973")),l=a.n(s),c=(a("551c"),a("970b")),d=a.n(c),u=a("5bc3"),p=a.n(u),f=a("2b0e"),m=a("f8c3"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"dialog",attrs:{maximized:e.$q.platform.is.mobile},on:{hide:e.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin",class:e.$q.platform.is.mobile?"q-ma-none q-pa-none":"full-60"},[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-toolbar-title",[e._v("Gerar licença")]),a("q-space"),a("q-btn",{attrs:{dense:"",flat:"",icon:"close"},on:{click:e.actClose}},[a("q-tooltip",[e._v("Sair sem salvar (ESC)")])],1)],1),a("q-card-section",{class:e.$q.platform.is.mobile?"q-ma-none q-pa-none":""},[a("q-card",{staticClass:"bg-white",attrs:{flat:"",bordered:!e.$q.platform.is.mobile,square:e.$q.platform.is.mobile}},[e.cliente?a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",[e._v("Cliente: "),a("span",{staticClass:"text-weight-bold"},[e._v(e._s(e.cliente.nome))])]),a("div",[e._v("Documento: "),a("span",{staticClass:"text-weight-bold"},[e._v(e._s(e.$helpers.mascaraDocCPFCNPJ(e.cliente.doc)))])])])])]):e._e(),a("q-separator",{attrs:{spaced:""}}),a("q-card-section",[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("q-radio",{staticClass:"q-mr-md",attrs:{dense:"",val:"vencimento",label:"Por vencimento"},model:{value:e.modo,callback:function(t){e.modo=t},expression:"modo"}}),a("q-radio",{attrs:{dense:"",val:"bloqueio",label:"Por bloqueio"},model:{value:e.modo,callback:function(t){e.modo=t},expression:"modo"}})],1),a("div",{staticClass:"col-xs-12 col-sm-4"},[a("inputdata",{attrs:{outlined:"",label:"Data de "+("vencimento"===e.modo?"vencimento":"bloqueio"),dense:!e.$q.platform.is.mobile},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}})],1),a("div",{staticClass:"col-xs-12 col-sm-8"},[a("q-input",{attrs:{type:"text",label:"Observação",counter:"",maxlength:"150",outlined:"","stack-label":"",dense:!e.$q.platform.is.mobile},model:{value:e.obs,callback:function(t){e.obs=t},expression:"obs"}})],1),a("div",{staticClass:"col-12"},[a("q-checkbox",{attrs:{label:"Forçar substituição da licença atual"},model:{value:e.force,callback:function(t){e.force=t},expression:"force"}})],1)])]),a("q-separator",{attrs:{spaced:""}}),a("q-card-section",[a("div",{staticClass:"row"},[a("q-btn",{attrs:{unelevated:"",label:"Gerar licença",color:"primary",loading:e.loading},on:{click:e.actSalvar}}),a("q-btn",{staticClass:"q-ml-md",attrs:{flat:"",label:"Sair",color:"primary",icon:"close"},on:{click:e.actClose}})],1)])],1)],1)],1)],1)},g=[],h=a("c1df"),b=a.n(h),w=a("67d7"),q={name:"cliente.licenca.add.dialog",components:{inputdata:w["a"]},props:["cliente"],data:function(){return{rows:[],modo:"vencimento",obs:"",force:!1,data:null,semestre:null,title:"Carregando...",loading:!0,tevealteracao:!1}},mounted:function(){var e=this;return l()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.data=b()().format("YYYY/MM/DD");case 2:case"end":return t.stop()}}),t)})))()},methods:{onRejected:function(e){this.$q.notify({type:"negative",message:"".concat(e.length," arquivo não foi carregado devido a restrição de tamanho ou extensão")})},actSalvar:function(){var e=this;return l()(o.a.mark((function t(){var a,n,i,r,s,l;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,a.loading=!0,n={ok:!1},t.prev=3,i=a.$helpers.strDateToFormated(a.data,"YYYY/MM/DD","YYYY-MM-DD"),r=new m["a"],t.next=8,r.gerarlicenca(a.cliente.doc,a.modo,i,a.obs,a.force);case 8:if(n=t.sent,n.ok){t.next=15;break}return s=a.$helpers.showDialog(n),t.next=13,s.then((function(){}));case 13:t.next=18;break;case 15:a.tevealteracao=!0,a.$q.notify({color:"positive",icon:"check",timeout:3e3,caption:n.msg,message:"Licença de uso"}),e.actClose();case 18:t.next=27;break;case 20:return t.prev=20,t.t0=t["catch"](3),a.loading=!1,l=a.$helpers.showDialog({ok:!1,msg:t.t0.message}),t.next=26,l.then((function(){}));case 26:return t.abrupt("return",!1);case 27:return t.prev=27,a.loading=!1,t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[3,20,27,30]])})))()},setTitle:function(e){this.title=e},ontevealteracao:function(e){this.tevealteracao=e},actClose:function(){this.onClose(this.tevealteracao)},onClose:function(e){this.$emit("ok",e),this.hide()},actUpdated:function(e){return l()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},show:function(){var e=this;this.$refs.dialog.show(),setTimeout((function(){e.loading=!1}),500)},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok",!0),this.hide()}}},_=q,x=a("2877"),y=a("24e8"),k=a("f09f"),$=a("65c6"),C=a("6ac5"),D=a("2c91"),Q=a("9c40"),S=a("05c0"),T=a("a370"),P=a("eb85"),R=a("3786"),B=a("27f9"),I=a("8f8e"),L=a("eebe"),N=a.n(L),E=Object(x["a"])(_,v,g,!1,null,null,null),Y=E.exports;N()(E,"components",{QDialog:y["a"],QCard:k["a"],QToolbar:$["a"],QToolbarTitle:C["a"],QSpace:D["a"],QBtn:Q["a"],QTooltip:S["a"],QCardSection:T["a"],QSeparator:P["a"],QRadio:R["a"],QInput:B["a"],QCheckbox:I["a"]});var z=function(){function e(){d()(this,e),this.limpardados(),this.pagination={page:1,rowsPerPage:20,sortBy:"razao",descending:!1,rowsNumber:0},this.showall=!1}return p()(e,[{key:"limpardados",value:function(){var e=l()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this._last_page=1,this.itens=null;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"readPropsTable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&this.pagination&&(this.pagination.page=1),e){var a=e.pagination,n=a.page,i=a.rowsPerPage,r=a.sortBy,o=a.descending,s=a.rowsNumber,l=e.filter;this.filter!==l&&(this.page=1),this.pagination={page:n,rowsPerPage:i,sortBy:r,descending:o,rowsNumber:s},this.filter=l}}},{key:"makequery",value:function(){var e=l()(o.a.mark((function e(){var t,a,n,i;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,e.prev=1,a={},a.t=(new Date).getTime(),null!==t.pagination.page&&t.pagination.page>1&&(a.page=t.pagination.page),null!==t.pagination.rowsPerPage&&t.pagination.rowsPerPage>0&&20!==parseInt(t.pagination.rowsPerPage)&&(a.pagesize=t.pagination.rowsPerPage),null!==t.orderby&&(a.sortby=JSON.stringify(t.orderby)),t.paruams)for(n in t.params)i=t.params[n],null!==i&&""!==i&&(a[n]=i);return e.abrupt("return",a);case 11:return e.prev=11,e.t0=e["catch"](1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadmore",value:function(){var e=l()(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.pagination.page=parseInt(this.currentpage)+1,e.next=3,this.fetch(!0);case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetch",value:function(){var e=l()(o.a.mark((function e(){var t,a,n,i,r,s,l=this,c=arguments;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]&&c[0],a=this,t||a.limpardados(),n={showall:a.showall?1:0,perpage:a.pagination.rowsPerPage,page:a.pagination.page},a.status&&null!==a.status&&(n["status"]=a.status),a.filter&&null!==a.filter&&""!==a.filter&&(n["find"]=a.filter),a.params)for(i in a.params)r=a.params[i],null!==r&&""!==r&&(n[i]=r);return null!==a.orderby&&(n["orderby"]=JSON.stringify(a.orderby)),e.next=10,f["a"].prototype.$axios.get("v1/admin/clientes/licencas",{params:n}).then((function(e){var n=e.data,i={ok:!1,msg:""};if(n&&(i.msg=n.msg?n.msg:"",n.ok)){n=n.data,a.total=n.total?parseInt(n.total):0,l.pagination.page=n.current_page,l._last_page=n.last_page,l.pagination.rowsPerPage=n.per_page,l.pagination.descending=!0===n.descending,l.pagination.rowsNumber=n.total?parseInt(n.total):0,i.ok=!0,t&&a.itens||(a.itens=[]);for(var r=0;r<n.rows.length;r++){var o=n.rows[r],s=new m["a"](o);a.itens.push(s)}}return i})).catch((function(e){return f["a"].prototype.$helpers.errorReturn(e)}));case 10:return s=e.sent,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"showAddLicenca",value:function(){var e=l()(o.a.mark((function e(t,a){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.$q.dialog({parent:t,component:Y,cliente:a,cancel:!0}).onOk(function(){var t=l()(o.a.mark((function t(a){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e({ok:!0,dados:a});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){e(null)}))})));case 1:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"temmaisregistros",get:function(){return this.currentpage!==this.lastpage&&!!this.itens&&this.itens.length>0}},{key:"totalrecordcount",get:function(){return this.pagination&&this.pagination.rowsNumber?this.pagination.rowsNumber:0}},{key:"recordcount",get:function(){return this.itens?this.itens.length:0}},{key:"currentpage",get:function(){return this.pagination&&this.pagination.page?this.pagination.page:1}},{key:"lastpage",get:function(){return this._last_page?this._last_page:1}},{key:"infopagination",get:function(){return this.recordcount+" de "+this.totalrecordcount}}]),e}(),A=z,M={name:"clientes.licencas.index",components:{},data:function(){var e=new A;return{dataset:e,rows:[],filterstatus:"expirado",filter:"",columns:[{name:"cliente",align:"left",label:"Cliente",field:"cliente",filterconfig:{value:null}},{name:"saldovencido",align:"right",label:"Financeiro",field:"saldovencido",filterconfig:{value:null}},{name:"datavencimento",align:"center",label:"Expira em",field:"datavencimento",filterconfig:{value:null}},{name:"databloqueio",align:"center",label:"Bloqueia em",field:"databloqueio"},{name:"diasrestantes",align:"center",label:"Dias restantes",field:"diasrestantes",filterconfig:{value:null}},{name:"status",align:"center",label:"status",field:"status"},{name:"dataativacao",align:"center",label:"Aplicado (ativado)",field:"dataativacao",filterconfig:{value:null}}],loading:!1,posting:!1,error:null}},mounted:function(){var e=this;return l()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,!a.$route.query){t.next=4;break}return t.next=4,a.queryRead(a.$route.query);case 4:return t.next=6,a.refreshData(null,!1);case 6:case"end":return t.stop()}}),t)})))()},methods:{queryRead:function(e){var t=this;return l()(o.a.mark((function a(){var n;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t,n.loading=!0;try{e&&(e.page&&(n.dataset.pagination.page=parseInt(e.page)),e.status&&(n.filterstatus=e.status),e.nivel&&(n.filternivel=e.nivel.split(",")),e.find&&(n.filter=e.find))}finally{n.loading=!1}case 3:case"end":return a.stop()}}),a)})))()},actAddLicencaDialog:function(e){var t=this;return l()(o.a.mark((function a(){var n,i,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t,a.next=3,n.dataset.showAddLicenca(n,e.cliente);case 3:if(i=a.sent,!i.ok){a.next=8;break}n.refreshData(null),a.next=12;break;case 8:if(!i.msg||""===i.msg){a.next=12;break}return r=n.$helpers.showDialog(i),a.next=12,r.then((function(){}));case 12:case"end":return a.stop()}}),a)})))()},onLoadInfinite:function(e,t){var a=this;return l()(o.a.mark((function e(){var n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=a,setTimeout((function(){try{if(n.loading)throw new Error("inload");if(!n.dataset.temmaisregistros)throw new Error("nao tem mais regsityros");n.actLoadMore(),t()}catch(e){t()}}),200);case 2:case"end":return e.stop()}}),e)})))()},actLoadMore:function(){var e=this;return l()(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,a.loading=!0,t.next=4,a.dataset.loadmore();case 4:n=t.sent,n.ok&&(a.rows=a.dataset.itens),a.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},refreshData:function(e){var t=arguments,a=this;return l()(o.a.mark((function n(){var i,r,s,l,c,d;return o.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=!(t.length>1&&void 0!==t[1])||t[1],r=a,!r.loading){n.next=4;break}return n.abrupt("return");case 4:return n.prev=4,r.loading=!0,r.error=null,r.error=null,r.dataset.readPropsTable(e,i),r.dataset.filter=r.filter,r.dataset.status=r.filterstatus,r.dataset.orderby=null,r.orderbylist&&(s=Object.keys(r.orderbylist).length,s>0&&(r.dataset.orderby=r.orderbylist)),n.next=15,r.dataset.fetch();case 15:if(l=n.sent,!l.ok){n.next=26;break}r.rows=r.dataset.itens,c={},null!==r.dataset.filter&&""!==r.dataset.filter&&(c.find=r.dataset.filter),null!==r.dataset.status&&(c.status=r.dataset.status),null!==r.dataset.pagination.page&&r.dataset.pagination.page>1&&(c.page=r.dataset.pagination.page),c.t=(new Date).getTime();try{r.$router.replace({name:r.$route.name,query:c,replace:!0,append:!1})}catch(o){console.error(o)}n.next=29;break;case 26:return d=r.$helpers.showDialog(l),n.next=29,d.then((function(){}));case 29:n.next=35;break;case 31:n.prev=31,n.t0=n["catch"](4),r.loading=!1,r.error=n.t0.message;case 35:r.loading=!1;case 36:case"end":return n.stop()}}),n,null,[[4,31]])})))()}}},O=M,J=a("9989"),j=a("54e1"),F=a("ddd8"),G=a("1c1c"),H=a("ef35"),K=a("66e5"),U=a("4074"),V=a("0170"),W=a("db86"),X=a("cb32"),Z=a("8380"),ee=a("eaac"),te=a("de5e"),ae=a("714f"),ne=Object(x["a"])(O,n,i,!1,null,null,null);t["default"]=ne.exports;N()(ne,"components",{QPage:J["a"],QCard:k["a"],QCardSection:T["a"],QBanner:j["a"],QInput:B["a"],QBtn:Q["a"],QSelect:F["a"],QSeparator:P["a"],QList:G["a"],QInfiniteScroll:H["a"],QItem:K["a"],QItemSection:U["a"],QItemLabel:V["a"],QTd:W["a"],QTooltip:S["a"],QAvatar:X["a"],QSpinnerDots:Z["a"],QTable:ee["a"],QPageSticky:te["a"],QToolbar:$["a"],QToolbarTitle:C["a"]}),N()(ne,"directives",{Ripple:ae["a"]})}}]);