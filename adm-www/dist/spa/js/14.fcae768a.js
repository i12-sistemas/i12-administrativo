(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"1ba8":function(a,t,e){"use strict";e.r(t);var o=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("q-layout",{staticClass:"bg-grey-1",attrs:{view:"hHh lpR lff"}},[o("q-header",{staticClass:"bg-primary q-mb-md gradientToolbar"},[o("div",{staticClass:"full-width row justify-center ",class:a.$q.platform.is.mobile?"":"full-height items-center"},[o("div",{staticClass:"column col-xs-12 col-sm-11 col-lg-8 col-xl-8 bg-white"},[o("div",{staticClass:"row full-width"},[o("q-toolbar",{class:a.$q.platform.is.mobile?"bg-primary text-white":"text-black"},[o("q-toolbar-title",{staticClass:"row items-center no-wrap cursor-pointer",attrs:{shrink:""}},[a.$q.platform.is.mobile?o("img",{staticStyle:{"max-height":"40px"},attrs:{src:e("2497")}}):a._e(),a.$q.platform.is.mobile?a._e():o("img",{staticStyle:{"max-height":"30px"},attrs:{src:e("2497")}})]),a.$q.platform.is.mobile?a._e():o("q-separator",{attrs:{spaced:"",inset:"",vertical:""}}),a.$q.platform.is.mobile?a._e():o("q-toolbar-title",[a._v("\n              Rastreamento de Carga\n            ")]),o("q-space"),o("q-btn",{attrs:{color:"primary",icon:"youtube_searched_for",label:"Nova consulta",flat:""},on:{click:a.actClear}}),o("q-btn",{attrs:{color:"primary",icon:"home",label:"Início",to:{name:"home"},flat:""}})],1),a.$q.platform.is.mobile?o("q-toolbar",{staticClass:"bg-deep-orange-8 text-white"},[o("q-toolbar-title",{staticClass:"text-center text-subtitle2 full-width",attrs:{shrink:""}},[a._v("\n              Rastreamento de Carga\n            ")]),o("q-space")],1):a._e()],1)])])]),o("q-page-container",{staticClass:"bg-primary"},[o("q-page",{},[o("div",{staticClass:"full-width row justify-center ",class:a.$q.platform.is.mobile?"":"full-height items-center"},[o("div",{staticClass:"column col-xs-12 col-sm-11 col-lg-8 col-xl-8 bg-white",staticStyle:{"border-radius":"0 0 12px 12px"}},[o("div",{staticClass:"row full-width justify-center items-center"},[a.dataresumo?a._e():o("q-card",{staticClass:"q-pa-none q-my-md",attrs:{flat:"",bordered:""}},[a.loading?a._e():o("q-card-section",{staticClass:"text-center q-py-md"},[o("div",{staticClass:"full-width row items-center"},[o("div",{staticClass:"col-xs-12 col-lg-4  text-left text-body text-grey-7"},[a._v("Rastrear por")]),o("div",{staticClass:"col-xs-12 col-lg-8  text-left"},[o("q-option-group",{attrs:{options:a.optionsconsulta,color:"primary",inline:""},model:{value:a.dadosconsulta.modo,callback:function(t){a.$set(a.dadosconsulta,"modo",t)},expression:"dadosconsulta.modo"}})],1)])]),o("q-separator"),a.dadosconsulta.modo&&""!==a.dadosconsulta.modo&&!a.loading?o("q-card-section",{staticClass:"text-center q-py-md"},["chave"===a.dadosconsulta.modo?o("div",{staticClass:"row justify-center items-center"},[o("div",{staticClass:"col-12"},[o("q-input",{ref:"txtchave",attrs:{type:"phone",label:"Chave",maxlength:"44"},model:{value:a.dadosconsulta.chave,callback:function(t){a.$set(a.dadosconsulta,"chave",t)},expression:"dadosconsulta.chave"}})],1)]):o("div",{staticClass:"row justify-center items-center"},[o("div",{staticClass:"col-12"},[o("q-input",{ref:"txtnumero",attrs:{type:"number",label:"Número da nota",maxlength:"11"},model:{value:a.dadosconsulta.numero,callback:function(t){a.$set(a.dadosconsulta,"numero",t)},expression:"dadosconsulta.numero"}})],1),o("div",{staticClass:"col-12"},[o("q-input",{ref:"txtcnpjemitente",attrs:{type:"tel",label:"CNPJ emitente",maxlength:"14",debounce:"500",hint:"CNPJ obrigatório (Somente números) - 14 dígitos",counter:"",rules:[function(a){return!!a||"* Obrigatório"},function(t){return a.$helpers.validarCNPJ(t)||"CNPJ inválido"}],"lazy-rules":""},model:{value:a.dadosconsulta.cnpjemitente,callback:function(t){a.$set(a.dadosconsulta,"cnpjemitente",t)},expression:"dadosconsulta.cnpjemitente"}})],1),o("div",{staticClass:"col-12"},[o("q-input",{ref:"txtcnpjdestinatario",attrs:{type:"tel",label:"CNPJ/CPF destinatário",maxlength:"14",debounce:"500",hint:"Documento obrigatório - 11 ou 14 dígitos",counter:"",rules:[function(a){return!!a||"* Obrigatório"},function(t){return a.$helpers.validarCNPJCPF(t)||"Documento inválido"}],"lazy-rules":""},model:{value:a.dadosconsulta.cnpjdestinatario,callback:function(t){a.$set(a.dadosconsulta,"cnpjdestinatario",t)},expression:"dadosconsulta.cnpjdestinatario"}})],1)])]):a._e(),a.loading?a._e():o("q-card-section",{staticClass:"text-center q-py-md"},[o("div",{staticClass:"full-width row justify-center items-center"},[a.recaptchaloading?o("div",[a._v("carregando...")]):a._e(),o("vue-recaptcha",{attrs:{sitekey:a.$configini.RECAPTCHA_KEY,loadRecaptchaScript:!0},on:{verify:a.verify,render:a.rendered}})],1)]),o("q-card-actions",{attrs:{vertical:"",align:"center"}},[o("q-btn",{staticClass:"full-width q-py-md",attrs:{color:a.allowConsulta?"primary":"grey-6",unelevated:a.allowConsulta,outline:!a.allowConsulta,label:"Rastrear carga",size:"lg",icon:"travel_explore",stack:"",disabled:!a.allowConsulta},on:{click:a.actConsulta}}),o("q-btn",{attrs:{flat:"",label:"Limpar consulta",icon:"clear"},on:{click:a.actClear}})],1)],1),!a.dataresumo&&!a.eventos||a.loading?a._e():o("q-card",{staticClass:"my-card q-mb-lg",attrs:{flat:"",bordered:""}},[a.dataresumo?o("q-card-section",[o("div",{staticClass:"row text-h6 q-mb-sm"}),o("div",{staticClass:"row q-col-gutter-x-xs"},a._l(a.dataresumo,(function(t,e){return o("div",{key:"resumo"+e,staticClass:"col-2 text-center"},[o("q-card",{staticClass:"my-card full-height",attrs:{bordered:"",flat:""}},[a.loading?o("q-card-section",{staticClass:"q-pa-xs"},[o("div",{staticClass:"text-body text-weight-bold ellipsis full-width"},[a._v("\n                        Consultando...\n                      ")])]):a._e(),a.loading?a._e():o("q-card-section",{staticClass:"q-pa-xs"},[o("div",{staticClass:"text-body text-weight-bold ellipsis full-width"},[a._v("\n                        "+a._s(t.title)+"\n                        "),o("q-tooltip",{attrs:{delay:700}},[a._v(a._s(t.title))])],1)]),o("q-separator"),a.loading?a._e():o("q-card-section",[a.getStatus(t)||"orcamento"!==t.type&&"transferencias"!==t.type?a._e():o("q-avatar",{attrs:{size:"60px","font-size":"52px",color:"white","text-color":"grey-3",icon:"cancel_presentation"}}),a.getStatus(t)||"orcamento"===t.type||"transferencias"===t.type?a._e():o("q-avatar",{attrs:{size:"60px","font-size":"52px",color:"grey-3","text-color":"grey-9",icon:"hourglass_empty"}}),a.getStatus(t)?a._e():o("div",{staticClass:"q-mt-md"},["orcamento"===t.type||"transferencias"===t.type?o("div",{staticClass:"text-grey"},[a._v("\n                          Processo ignorado\n                        ")]):o("div",{staticClass:"text-grey-7"},[a._v("Aguardando")])]),"ok"===a.getStatus(t)?o("q-avatar",{attrs:{size:"60px","font-size":"52px",color:"positive","text-color":"white",icon:"check"}}):a._e(),"stop"===a.getStatus(t)?o("q-avatar",{attrs:{size:"60px","font-size":"52px",color:"amber","text-color":"white",icon:"double_arrow"}}):a._e(),"error"===a.getStatus(t)?o("q-avatar",{attrs:{size:"60px","font-size":"52px",color:"red","text-color":"white",icon:"clear"}}):a._e()],1),a.temDados(t)&&!a.loading?o("q-separator"):a._e(),a.temDados(t)&&!a.loading?o("q-card-section",{staticClass:"text-caption"},["orcamento"===t.type&&a.temDados(t)?o("div",[o("div",[a._v(a._s(a.$helpers.datetimeToBR(t.data.dhlocal_data,!0,!1)))]),o("div",{staticClass:"text-weight-bold"},[a._v("Núm.: "+a._s(a.$helpers.formatMilhar(t.data.id)))])]):a._e(),"nfe"===t.type&&a.temDados(t)?o("div",[o("div",[a._v(a._s(a.$helpers.dateToBR(t.data.dhlocal_data)))]),o("div",[a._v("Nº: "+a._s(t.data.notanumero))])]):a._e(),"coleta"===t.type&&a.temDados(t)?o("div",[t.data.created_at?o("div",[a._v(a._s(a.$helpers.dateToBR(t.data.created_at)))]):a._e(),o("div",[a._v("Nº: "+a._s(t.data.id))])]):a._e(),"entrada"===t.type?o("div",[o("div",[a._v(a._s(a.$helpers.dateToBR(t.data.created_at)))]),o("div",[a._v("Nº: "+a._s(t.data.id))])]):a._e(),"entrega"===t.type?o("div",[o("div",[a._v(a._s(a.$helpers.dateToBR(t.data.created_at)))]),o("div",[a._v("Nº: "+a._s(t.data.id))])]):a._e(),"transferencias"===t.type?o("div",[1===t.data.length?o("div",[a._v(a._s(a.$helpers.dateToBR(t.data[0].created_at)))]):a._e(),1===t.data.length?o("div",[a._v("Nº: "+a._s(t.data[0].id))]):a._e(),t.data.length>1?o("div",[a._v("Quantidade")]):a._e(),t.data.length>1?o("div",[a._v(a._s(t.data.length+" itens"))]):a._e()]):a._e()]):a._e()],1)],1)})),0)]):a._e(),a.eventos?o("q-separator",{attrs:{spaced:""}}):a._e(),a.eventos?o("q-card-section",[o("div",{staticClass:"text-h6 q-mb-sm"},[a._v("Linha do tempo")]),a.loading?a._e():o("div",[o("q-timeline",{attrs:{layout:"comfortable",side:"left",color:"secondary"}},a._l(a.eventos,(function(t,e){return o("q-timeline-entry",{key:"event"+e,attrs:{title:t.title,side:"left",icon:a.iconEvent(t).name,color:a.iconEvent(t).color},scopedSlots:a._u([{key:"subtitle",fn:function(){return[o("div",[a._v("\n                        "+a._s(a.$helpers.datetimeFormat(t.dh,"ddd")+", "+a.$helpers.datetimeToBR(t.dh,!1,!0))+"\n                      ")]),0===e?o("div",[a._v("\n                        "+a._s(a.$helpers.datetimeRelativeToday(t.dh))+"\n                      ")]):a._e(),e>0&&a.eventos[0].dh<t.dh?o("div",[a._v("\n                        HÁ\n                        "),a.$helpers.diffTime(a.eventos[0].dh,t.dh,"seconds")>86400?o("span",[a._v("\n                          "+a._s(a.$helpers.diffDate(a.eventos[0].dh,t.dh,"days"))+" dias\n                        ")]):a.$helpers.diffTime(a.eventos[0].dh,t.dh,"seconds")>3600?o("span",[a._v("\n                          "+a._s(a.$helpers.diffTime(a.eventos[0].dh,t.dh,"hours"))+" horas\n                        ")]):a.$helpers.diffTime(a.eventos[0].dh,t.dh,"seconds")>60?o("span",[a._v("\n                          "+a._s(a.$helpers.diffTime(a.eventos[0].dh,t.dh,"minutes"))+" minutos\n                        ")]):o("span",[a._v("\n                          "+a._s(a.$helpers.diffTime(a.eventos[0].dh,t.dh,"seconds"))+" segundos\n                        ")])]):a._e()]},proxy:!0}],null,!0)},[t.text&&""!==t.text?o("div",[o("span",{domProps:{innerHTML:a._s(t.text)}})]):a._e()])})),1)],1)]):a._e(),o("q-card-actions",{attrs:{vertical:"",align:"center"}},[o("q-btn",{attrs:{color:"primary",icon:"youtube_searched_for",label:"Nova consulta",unelevated:""},on:{click:a.actClear}})],1)],1)],1)])])])],1),o("q-footer",[o("div",{staticClass:"bg-grey-2 text-grey-8 text-caption q-pa-xs text-center q-mt-md"},[o("div",[o("span",{staticClass:"text-weight-bold"},[a._v(a._s(a.appPackage.productName)+" :: "+a._s(a.appPackage.description))]),a._v(" | Versão "+a._s(a.appPackage.version)+" release "+a._s(a.$helpers.datetimeToBR(a.appPackage.releasedatetime)))]),o("div",[a._v("© Copyright "+a._s(a.year?a.year:"")+" :: "),o("a",{attrs:{href:"http://www.i12.com.br",target:"_blank"}},[a._v("i12.com.br")])])])])],1)},s=[],r=(e("7f7f"),e("a481"),e("a34a")),n=e.n(r),i=(e("96cf"),e("c973")),d=e.n(i),c=e("e096"),l=e("c1df"),u=e.n(l),p=e("9224"),m=e("523b"),h={name:"publico.coleta.rastreamento",components:{VueRecaptcha:c["a"]},data:function(){var a=new m["a"];return{eventos:null,dataresumo:null,dataset:a,title:"Conecta Transportes - Rastreamento de Carga",dadosconsulta:{modo:"chave",chave:"35220467380170000110550550007916321705264891",numero:"791693",cnpjemitente:"67380170000110",cnpjdestinatario:"13537735000362"},optionsconsulta:[{label:"Chave da nota",value:"chave"},{label:"Dados da nota",value:"dados"}],token:null,recaptchaloading:!0,recaptchatoken:null,loading:!1,error:null,appPackage:p,year:2021,testeerro:!1}},meta:function(){return{title:this.title}},mounted:function(){var a=this;a.year=u()().year(),a.$route.query.modo&&(a.dadosconsulta.modo=a.$route.query.modo),"chave"!==a.dadosconsulta.modo&&"dados"!==a.dadosconsulta.modo&&(a.dadosconsulta.modo="chave"),a.$route.query.chave&&(a.dadosconsulta.chave=a.$route.query.chave),a.$route.query.cnpjemitente&&(a.dadosconsulta.cnpjemitente=a.$route.query.cnpjemitente),a.$route.query.cnpjdestinatario&&(a.dadosconsulta.cnpjdestinatario=a.$route.query.cnpjdestinatario),a.recaptchaLoad()},computed:{allowConsulta:function(){var a=this,t=!0;try{if(a.loading)throw new Error("Em loading");if(!a.recaptchatoken)throw new Error("Sem recaptcha nota");if("chave"===a.dadosconsulta.modo){if(!a.dadosconsulta.chave)throw new Error("Sem chave");if(44!==a.dadosconsulta.chave.length)throw new Error("Sem com menos de 44 digitos")}else{if("dados"!==a.dadosconsulta.modo)throw new Error("modo invalida");if(!a.dadosconsulta.numero)throw new Error("Sem numero");if(!(parseInt(a.dadosconsulta.numero)>0))throw new Error("Sem numero invalido");if(!a.dadosconsulta.cnpjemitente)throw new Error("Sem cnpjemitente");if(!a.$helpers.validarCNPJ(a.dadosconsulta.cnpjemitente))throw new Error("Sem cnpjemitente");if(!a.dadosconsulta.cnpjdestinatario)throw new Error("Sem cnpjdestinatario");if(!a.$helpers.validarCNPJCPF(a.dadosconsulta.cnpjdestinatario))throw new Error("Sem cnpjdestinatario")}}catch(e){t=!1}return t}},methods:{temDados:function(a){if(this.loading)return!1;switch(a.type){case"transferencias":return!!a.data&&a.data.length>0;default:return!!a.data&&a.data.id>0}},getStatus:function(a){var t=null;switch(a.type){case"orcamento":a.data&&a.data.id>0&&(t="ok");break;case"nfe":a.data&&a.data.id>0&&(0===a.data.baixanfestatus&&(t="stop"),1===a.data.baixanfestatus&&(t="ok"),2===a.data.baixanfestatus&&(t="error"),a.data.xmlprocessado||(t="error"));break;case"coleta":a.data&&a.data.id>0&&("0"===a.data.situacao.value&&(t="stop"),"1"===a.data.situacao.value&&(t="stop"),"2"===a.data.situacao.value&&(t="ok"),"3"===a.data.situacao.value&&(t="error"));break;case"entrada":a.data&&a.data.id>0&&("1"===a.data.status.value&&(t="stop"),"2"===a.data.status.value&&(t="ok"));break;case"entrega":a.data&&a.data.id>0&&(["1","11"].indexOf(a.data.status.value)>=0&&(t="stop"),["2","3"].indexOf(a.data.status.value)>=0&&(t="stop"),["4","41","5"].indexOf(a.data.status.value)>=0&&(t="ok"));break;case"transferencias":if(a.data&&a.data.length>0)for(var e=0;e<a.data.length;e++){var o=a.data[e];["1","2","3"].indexOf(o.status.value)>=0&&(t="stop"),"4"===o.status.value&&(t="ok")}break}return t},iconEvent:function(a){var t=this,e={name:"circle",color:"primary"};switch(a.type){case"orcamento":e.name="price_check";break;case"nfe":e.name="receipt_long",e.color="blue";break;case"entrada":e.name="directions",e.color="blue-7";break;case"transfer":e.name="repeat",e.color="cyan-8";break;case"entrega":e.name="local_shipping",e.color="green";break;case"coleta":for(var o=null,s=0;s<t.dataresumo.length;s++)if("coleta"===t.dataresumo[s].type){o=t.dataresumo[s].data;break}o&&o.id>0&&(e.name=o.origem.icon,e.color=o.origem.color);break}return e},rendered:function(a){this.recaptchaloading=!1},verify:function(a){var t=this;return d()(n.a.mark((function e(){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.recaptchatoken=a;case 1:case"end":return e.stop()}}),e)})))()},recaptchaLoad:function(){return d()(n.a.mark((function a(){return n.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}}),a)})))()},actClear:function(){var a=this;a.loading=!0,a.dataresumo=null,a.eventos=null,a.dadosconsulta.chave="",a.dadosconsulta.numero="",a.dadosconsulta.cnpjemitente="",a.dadosconsulta.cnpjdestinatario="",a.loading=!1,a.$nextTick((function(){"chave"===a.dadosconsulta.modo?a.$refs.txtchave.focus():a.$refs.txtnumero.focus()}));var t={t:(new Date).getTime()};try{a.$router.replace({name:a.$route.name,query:t,replace:!0,append:!1})}catch(e){console.error(e)}},actConsulta:function(){var a=this;return d()(n.a.mark((function t(){var e,o,s,r;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=a,t.prev=1,!e.loading){t.next=4;break}throw new Error("Em loading");case 4:if(e.recaptchatoken){t.next=6;break}throw new Error("Sem recaptcha nota");case 6:if("chave"!==e.dadosconsulta.modo){t.next=13;break}if(e.dadosconsulta.chave){t.next=9;break}throw new Error("Sem chave");case 9:if(44===e.dadosconsulta.chave.length){t.next=11;break}throw new Error("Sem com menos de 44 digitos");case 11:t.next=26;break;case 13:if("dados"!==e.dadosconsulta.modo){t.next=26;break}if(e.dadosconsulta.numero){t.next=16;break}throw new Error("Sem numero");case 16:if(parseInt(e.dadosconsulta.numero)>0){t.next=18;break}throw new Error("Sem numero invalido");case 18:if(e.dadosconsulta.cnpjemitente){t.next=20;break}throw new Error("Sem cnpjemitente");case 20:if(e.$helpers.validarCNPJ(e.dadosconsulta.cnpjemitente)){t.next=22;break}throw new Error("Sem cnpjemitente");case 22:if(e.dadosconsulta.cnpjdestinatario){t.next=24;break}throw new Error("Sem cnpjdestinatario");case 24:if(e.$helpers.validarCNPJCPF(e.dadosconsulta.cnpjdestinatario)){t.next=26;break}throw new Error("Sem cnpjdestinatario");case 26:return t.next=28,e.dataset.findrastreioPublico(e.dadosconsulta,e.recaptchatoken);case 28:if(o=t.sent,o.ok){e.dataresumo=[],e.dataresumo.push({title:"Orçamento",type:"orcamento",data:o.data.orcamento?o.data.orcamento.id>0:null}),s=null,o.data.coleta&&o.data.coleta.id>0&&(s=o.data.coleta),o.data.nfe&&o.data.nfe.id>0&&(o.data.nfe.coletaavulsa&&s&&"4"===s.origem.value?(e.dataresumo.push({title:"Nota Fiscal",type:"nfe",data:o.data.nfe}),e.dataresumo.push({title:"Coleta",type:"coleta",data:s})):(e.dataresumo.push({title:"Coleta",type:"coleta",data:s}),e.dataresumo.push({title:"Nota Fiscal",type:"nfe",data:o.data.nfe}))),e.dataresumo.push({title:"Entrada",type:"entrada",data:o.data.entrada&&o.data.entrada.id>0?o.data.entrada:null}),e.dataresumo.push({title:"Transferências",type:"transferencias",data:o.data.transferencias&&o.data.transferencias.length>0?o.data.transferencias:null}),e.dataresumo.push({title:"Entrega",type:"entrega",data:o.data.entrega&&o.data.entrega.id>0?o.data.entrega:null}),e.eventos=o.data.eventos,r={t:(new Date).getTime(),modo:e.dadosconsulta.modo},"chave"===e.dadosconsulta.modo?r["chave"]=e.dadosconsulta.chave:"dados"===e.dadosconsulta.modo&&(r["numero"]=e.dadosconsulta.numero,r["cnpjemitente"]=e.dadosconsulta.cnpjemitente,r["cnpjdestinatario"]=e.dadosconsulta.cnpjdestinatario);try{e.$router.replace({name:e.$route.name,query:r,replace:!0,append:!1})}catch(n){console.error(n)}}else e.$helpers.showDialog(o),e.msgError=o.msg;t.next=36;break;case 32:t.prev=32,t.t0=t["catch"](1),console.error(t.t0),e.$helpers.showDialog({ok:!1,msg:t.t0.message},!0);case 36:case"end":return t.stop()}}),t,null,[[1,32]])})))()}}},v=h,f=(e("3b46"),e("2877")),g=e("4d5a"),b=e("e359"),_=e("65c6"),w=e("6ac5"),y=e("eb85"),x=e("2c91"),C=e("9c40"),q=e("09e3"),k=e("9989"),$=e("f09f"),j=e("a370"),S=e("9f0a"),E=e("27f9"),T=e("4b7e"),P=e("05c0"),N=e("cb32"),Q=e("05eb"),R=e("74af"),D=e("7ff0"),z=e("eebe"),J=e.n(z),B=Object(f["a"])(v,o,s,!1,null,null,null);t["default"]=B.exports;J()(B,"components",{QLayout:g["a"],QHeader:b["a"],QToolbar:_["a"],QToolbarTitle:w["a"],QSeparator:y["a"],QSpace:x["a"],QBtn:C["a"],QPageContainer:q["a"],QPage:k["a"],QCard:$["a"],QCardSection:j["a"],QOptionGroup:S["a"],QInput:E["a"],QCardActions:T["a"],QTooltip:P["a"],QAvatar:N["a"],QTimeline:Q["a"],QTimelineEntry:R["a"],QFooter:D["a"]})},"3b46":function(a,t,e){"use strict";var o=e("c3b9"),s=e.n(o);s.a},c3b9:function(a,t,e){}}]);