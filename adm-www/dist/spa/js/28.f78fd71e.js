(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{"1be9":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("q-page",{},[o("div",{staticClass:"row doc-header",class:e.$q.platform.is.mobile?"":"q-pa-lg"},[o("div",{staticClass:"col-sm-12"},[e.error?o("div",{staticClass:"col-12"},[o("q-banner",{staticClass:"bg-negative text-white"},[e._v(e._s(e.error))])],1):e._e(),o("q-card",{staticClass:"bg-white",attrs:{flat:"",bordered:!e.$q.platform.is.mobile,square:e.$q.platform.is.mobile}},[o("q-card-section",[o("div",{staticClass:"row q-col-gutter-md"},[o("div",{staticClass:"col-sm-12 col-md-6"},[o("div",{staticClass:"col-12 "},[o("div",{staticClass:"ellipsis"},[e._v("Informe qualquer Informação para pesquisar")]),o("div",{staticClass:"text-caption  text-grey-7 ellipsis"},[e._v("Ex.: CNPJ, número, remetente, destinatário, coleta...")])]),o("div",{staticClass:"col-sm-12 col-md-8 col-lg-6"},[o("q-input",{attrs:{outlined:"",debounce:"700",placeholder:"Procurar",label:"Procurar",clearable:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)]),o("div",{staticClass:"col-sm-12 col-md-6"},[o("div",{staticClass:"col-12 "},[o("div",{staticClass:"ellipsis"},[e._v("Você também pode restrigir a consulta pela data de coleta")]),o("div",{staticClass:"text-caption text-grey-7 ellipsis"},[e._v("Essa opção é opcional")])]),o("div",{staticClass:"col-sm-12 col-md-8 col-lg-6"},[o("q-select",{staticClass:"q-mr-xs",attrs:{options:e.optionsfilter,label:"Filtro",outlined:"","emit-value":"","stack-label":"","map-options":""},scopedSlots:e._u([{key:"selected-item",fn:function(t){return[o("div",{staticClass:"ellipsis q-pt-xs"},[o("q-icon",{staticClass:"q-mr-sm",attrs:{name:t.opt.icon,size:"16px",color:t.opt.color}}),o("span",[e._v(e._s(t.opt.desc))]),o("q-tooltip",{attrs:{delay:700}},[o("div",[e._v(e._s(t.opt.tooltip))])])],1)]}},{key:"option",fn:function(t){return[o("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:t.opt.icon,color:t.opt.color}})],1),o("q-item-section",[o("q-item-label",[e._v(e._s(t.opt.desc))]),o("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.opt.tooltip))])],1)],1)]}}]),model:{value:e.customfilter,callback:function(t){e.customfilter=t},expression:"customfilter"}})],1)])])]),o("q-card-section",[o("div",{staticClass:"row"},[o("q-btn",{attrs:{unelevated:"",label:"Consultar",color:"primary",icon:"search",loading:e.loading},on:{click:function(t){return e.refreshData(null)}}})],1)])],1),e.rows&&e.rows.length>0?o("q-card",{staticClass:"bg-white q-mt-md",attrs:{flat:"",bordered:!e.$q.platform.is.mobile,square:e.$q.platform.is.mobile}},[e.$q.platform.is.mobile?o("q-separator"):e._e(),o("q-card-section",{staticClass:"q-pa-none"},[o("div",{staticStyle:{"max-width":"100vw"}},[o("q-table",{attrs:{data:e.rows,columns:e.columns,dense:!e.$q.platform.is.mobile,flat:"",loading:e.loading,color:"primary",id:"sticky-table",pagination:e.dataset.pagination,"row-key":"id","rows-per-page-options":[15],filter:e.filter},on:{"update:pagination":function(t){return e.$set(e.dataset,"pagination",t)},request:e.refreshData},scopedSlots:e._u([{key:"header-cell-clienteorigem",fn:function(t){return[o("q-th",{attrs:{props:t}},[o("div",[o("q-icon",{attrs:{name:"trip_origin","text-color":"black"}}),o("span",{staticClass:"q-ml-xs"},[e._v("Origem")]),o("q-icon",{staticClass:"q-ml-md",attrs:{name:"pin_drop","text-color":"black"}}),o("span",{staticClass:"q-ml-xs"},[e._v("Destino")]),o("q-tooltip",{attrs:{delay:700}},[o("div",[o("q-icon",{attrs:{name:"trip_origin","text-color":"black"}}),e._v(" Remetente")],1),o("div",[o("q-icon",{attrs:{name:"pin_drop","text-color":"black"}}),e._v(" Destinatário")],1)])],1)])]}},{key:"body-cell-action",fn:function(t){return[o("q-td",{attrs:{props:t}},[o("q-btn",{attrs:{flat:"",round:"",dense:!e.$q.platform.is.mobile,size:e.$q.platform.is.mobile?"12px":"8px",icon:"edit"},on:{click:function(o){return e.actEditDialog(t.pageIndex)}}},[o("q-tooltip",[e._v("Abrir coleta")])],1)],1)]}},{key:"body-cell-id",fn:function(t){return[o("q-td",{attrs:{props:t}},[o("div",{staticClass:"cursor-pointer",on:{click:function(o){return e.actEditDialog(t.pageIndex)}}},[e._v("\r\n                        "+e._s(t.row.id)+"\r\n                        "),o("q-tooltip",[o("div",[e._v("Coleta # "+e._s(t.row.id))]),o("div",[e._v("Origem: "+e._s(t.row.origem.description))])])],1)])]}},{key:"body-cell-nota",fn:function(t){return[o("q-td",{attrs:{props:t}},[o("div",{staticClass:"cursor-pointer",on:{click:function(o){return e.actRastrear(t.row)}}},[t.row.notascount>0?o("div",[1===t.row.notascount?o("div",[e._v(" "+e._s(t.row.notas[0].notanumero))]):e._e(),t.row.notascount>1?o("div",[e._v("* "+e._s(t.row.notascount)+" nota(s)")]):e._e(),o("q-tooltip",[o("div",[e._v("Notas coletadas")]),e._l(t.row.notas,(function(t,a){return o("div",{key:a,staticClass:"q-mt-sm"},[o("div",[e._v("Número: "+e._s(t.notanumero)+" - Série: "+e._s(t.notaserie))]),t.notadh?o("div",[e._v("Emissão: "+e._s(e.$helpers.dateToBR(t.notadh)))]):e._e(),o("div",[e._v(e._s(t.remetentenome))])])}))],2)],1):o("div",[t.row.nfe&&t.row.nfe.nNF>0?o("div",[e._v("\r\n                            "+e._s(t.row.nfe.nNF)+"\r\n                          ")]):e._e(),o("q-tooltip",[o("div",[e._v("Coleta # "+e._s(t.row.id))]),o("div",[e._v("Origem: "+e._s(t.row.origem.description))]),t.row.created_at?o("div",[e._v("Inserida:  "+e._s(e.$helpers.datetimeToBR(t.row.created_at,!1,!0))+" por "+e._s(t.row.created_usuario?t.row.created_usuario.nome:"** Não identificado **"))]):e._e(),t.row.updated_at!==t.row.created_at?o("div",[e._v("Alterada:  "+e._s(e.$helpers.datetimeToBR(t.row.updated_at,!1,!0))+" por "+e._s(t.row.updated_usuario?t.row.updated_usuario.nome:"** Não identificado **"))]):e._e(),t.row.notascount>0?o("div",[1===t.row.notascount?o("div",[e._v("Existe 1 nota fiscal associada")]):e._e(),t.row.notascount>1?o("div",[e._v("Existem "+e._s(t.row.notascount)+" nota(s) fiscais")]):e._e(),e._l(t.row.notas,(function(t,a){return o("div",{key:a},[o("div",[e._v("Número: "+e._s(t.notanumero)),t.notadh?o("span",[e._v(" - Emissão: "+e._s(e.$helpers.dateToBR(t.notadh)))]):e._e(),e._v(" - "+e._s(t.remetentenome))])])}))],2):e._e()])],1)])])]}},{key:"body-cell-situacao",fn:function(t){return[o("q-td",{attrs:{props:t}},[t.row.statuscliente.value>0?o("div",{staticClass:"ellipsis text-white rounded-borders q-px-xs text-weight-bold",class:"bg-"+t.row.statuscliente.color},[e._v("\r\n                        "+e._s(t.row.statuscliente.description)+"\r\n                        "),o("q-tooltip",{attrs:{delay:500}},[o("div",[e._v("Status: "+e._s(t.row.statuscliente.description))]),o("div",[e._v(e._s(t.row.statuscliente.tooltip))])])],1):e._e()])]}},{key:"body-cell-dhcoleta",fn:function(t){return[o("q-td",{attrs:{props:t}},[o("div",{staticClass:"cursor-pointer",on:{click:function(o){return e.actEditDialog(t.pageIndex)}}},[e._v("\r\n                        "+e._s(e.$helpers.dateToBR(t.row.dhcoleta))+"\r\n                        "),o("q-tooltip",[e.$helpers.diffDate(t.row.dhcoleta,"","days")>1&&("0"==t.row.situacao.value||"1"==t.row.situacao.value)?o("div",{staticClass:"q-mr-xs"},[e._v("Atrasado")]):e._e(),o("div",[e._v(e._s(e.$helpers.datetimeRelativeToday(t.row.dhcoleta)))])])],1)])]}},{key:"body-cell-dhbaixa",fn:function(t){return[o("q-td",{attrs:{props:t}},[t.row.dhbaixa?o("div",{staticClass:"cursor-pointer",staticStyle:{"max-width":"150px"},on:{click:function(o){return e.actEditDialog(t.pageIndex)}}},[o("span",{staticClass:"q-mr-xs"},[e._v(e._s(e.$helpers.dateToBR(t.row.dhbaixa)))]),o("q-tooltip",[o("div",[e._v(e._s(e.$helpers.datetimeRelativeToday(t.row.dhbaixa)))]),o("div",[e._v("em "+e._s(e.$helpers.datetimeToBR(t.row.dhbaixa)))]),o("div",[e._v("Tempo de encerramento: "+e._s(e.$helpers.diffDate(t.row.dhcoleta,t.row.dhbaixa,"days"))+" dias")])])],1):e._e()])]}},{key:"body-cell-clienteorigem",fn:function(t){return[o("q-td",{attrs:{props:t}},[t.row.clienteorigem&&""!==t.row.clienteorigem.cnpj?o("div",{staticClass:"cursor-pointer",class:e.usuario&&e.usuario.clientescnpj.indexOf(t.row.clienteorigem.cnpj)>=0?"text-grey-6":"text-black text-weight-medium",staticStyle:{"min-width":"150px"},on:{click:function(o){return e.actEditDialog(t.pageIndex)}}},[o("q-icon",{staticClass:"q-mr-sm",attrs:{name:"trip_origin",color:e.usuario&&e.usuario.clientescnpj.indexOf(t.row.clienteorigem.cnpj)>=0?"grey-6":"black"}}),o("span",[e._v(e._s(t.row.clienteorigem.razaosocial))]),o("q-tooltip",{attrs:{delay:700}},[o("div",[e._v("Remetente")]),o("div",{staticClass:"text-weight-bold"},[e._v("("+e._s(t.row.clienteorigem.razaosocial)+")")]),""!=t.row.clienteorigem.fantasia?o("div",[e._v("Fantasia: "+e._s(t.row.clienteorigem.fantasia))]):e._e(),""!=t.row.clienteorigem.cnpj?o("div",[e._v("CNPJ: "+e._s(e.$helpers.mascaraDocCPFCNPJ(t.row.clienteorigem.cnpj)))]):e._e()])],1):e._e(),t.row.clientedestino&&""!==t.row.clientedestino.cnpj?o("div",{staticClass:"cursor-pointer",class:e.usuario&&e.usuario.clientescnpj.indexOf(t.row.clientedestino.cnpj)>=0?"text-grey-6":"text-black text-weight-medium",staticStyle:{"min-width":"150px"},on:{click:function(o){return e.actEditDialog(t.pageIndex)}}},[o("q-icon",{staticClass:"q-mr-sm",attrs:{name:"pin_drop",color:e.usuario&&e.usuario.clientescnpj.indexOf(t.row.clientedestino.cnpj)>=0?"grey-6":"black"}}),o("span",[e._v(e._s(t.row.clientedestino.razaosocial))]),o("q-tooltip",{attrs:{delay:700}},[o("div",[e._v("Destinatário")]),o("div",{staticClass:"text-weight-bold"},[e._v("("+e._s(t.row.clientedestino.razaosocial)+")")]),""!=t.row.clientedestino.fantasia?o("div",[e._v("Fantasia: "+e._s(t.row.clientedestino.fantasia))]):e._e(),""!=t.row.clientedestino.cnpj?o("div",[e._v("CNPJ: "+e._s(e.$helpers.mascaraDocCPFCNPJ(t.row.clientedestino.cnpj)))]):e._e()])],1):e._e()])]}},{key:"body-cell-enderecocoleta",fn:function(t){return[o("q-td",{attrs:{props:t}},[t.row.enderecocoleta&&t.row.enderecocoleta.cidade.id>0?o("div",{staticClass:"cursor-pointer ellipsis",staticStyle:{"min-width":"100px"},on:{click:function(o){return e.actEditDialog(t.pageIndex)}}},[t.row.regiaocoleta&&t.row.regiaocoleta.id>0?o("div",{staticClass:"text-caption"}):e._e(),o("div",[e._v(e._s(t.row.enderecocoleta.cidade.cidade+"/"+t.row.enderecocoleta.cidade.uf))]),o("q-tooltip",{attrs:{delay:200}},[o("div",{staticClass:"text-caption text-weight-bold"},[e._v("Endereço da coleta")]),t.row.enderecocoleta&&t.row.enderecocoleta.cidade.id>0?o("div",[e._v(e._s(t.row.enderecocoleta.enderecocompletotext))]):e._e(),t.row.regiaocoleta&&t.row.regiaocoleta.id>0?o("div",[e._v("Região: "+e._s(t.row.regiaocoleta.id+" - "+t.row.regiaocoleta.regiao))]):e._e(),o("div",{staticClass:"q-mt-md text-caption text-weight-bold"},[e._v("Telefones cliente de origem")]),t.row.clienteorigem.fone1&&""!=t.row.clienteorigem.fone1?o("div",[e._v(e._s(e.$helpers.mascaratel(t.row.clienteorigem.fone1)))]):e._e(),t.row.clienteorigem.fone2&&""!=t.row.clienteorigem.fone2?o("div",[e._v(e._s(e.$helpers.mascaratel(t.row.clienteorigem.fone2)))]):e._e()])],1):e._e()])]}},{key:"body-cell-cidadedestino",fn:function(t){return[o("q-td",{attrs:{props:t}},[t.row.clientedestino&&t.row.clientedestino.id>0?o("div",{staticClass:"cursor-pointer ellipsis",staticStyle:{"min-width":"100px"},on:{click:function(o){return e.actEditDialog(t.pageIndex)}}},[t.row.clientedestino.endereco&&t.row.clientedestino.endereco.cidade.id>0?o("div",{staticClass:"text-caption"},[e._v("\r\n                          "+e._s(t.row.clientedestino.endereco.cidade.cidade+"/"+t.row.clientedestino.endereco.cidade.uf)+"\r\n                        ")]):e._e(),o("q-tooltip",{attrs:{delay:700}},[o("div",{staticClass:"text-caption text-weight-bold"},[e._v("Endereço da coleta")]),t.row.enderecocoleta&&t.row.enderecocoleta.cidade.id>0?o("div",[e._v(e._s(t.row.enderecocoleta.enderecocompletotext))]):e._e(),t.row.regiaocoleta&&t.row.regiaocoleta.id>0?o("div",[e._v("Região: "+e._s(t.row.regiaocoleta.id+" - "+t.row.regiaocoleta.regiao))]):e._e()])],1):e._e(),t.row.clientedestino&&t.row.clientedestino.id>0?e._e():o("div",{staticClass:"text-red"},[e._v("\r\n                        Indefinido\r\n                        "),o("q-tooltip",{attrs:{delay:700}},[e._v("Nenhum cliente definido")])],1)])]}}],null,!1,1567188509)})],1)])],1):e._e(),o("q-page-sticky",{attrs:{position:"top",expand:""}},[o("q-toolbar",{staticClass:"bg-white text-primary shadow-up-21"},[o("q-btn",{attrs:{flat:"",dense:"",round:"","aria-label":"Menu",icon:"menu"},on:{click:function(t){return e.$store.dispatch("homedashboard/togglemenu")}}}),o("q-btn",{attrs:{flat:"",round:"",icon:"arrow_back"},on:{click:function(t){return e.$router.go(-1)}}}),e.$q.platform.is.mobile?e._e():o("q-separator",{attrs:{vertical:"",inset:"",spaced:""}}),o("q-toolbar-title",[e._v("Coletas")]),o("q-btn",{attrs:{icon:"sync",label:e.$q.platform.is.mobile?"":"Atualizar",round:e.$q.platform.is.mobile,flat:"",loading:e.loading},on:{click:function(t){return e.refreshData(null)}}})],1)],1)],1)])])],1)},i=[],r=(o("7514"),o("a481"),o("ac6a"),o("cadf"),o("456d"),o("6b54"),o("06db"),o("28a5"),o("7f7f"),o("a34a")),n=o.n(r),s=(o("96cf"),o("c973")),l=o.n(s),c=o("63c4"),d=o("a704"),u={name:"coletas.consulta",components:{},data:function(){var e=new c["a"];return{dataset:e,rows:[],customfilter:null,filter:"",optionsfilter:[],columns:[{name:"action",align:"left",label:"*",field:"id"},{name:"id",align:"center",label:"Nº Coleta",field:"id",filterconfig:{value:null}},{name:"nota",align:"center",label:"Nº NF-e",field:"nota",filterconfig:{value:null}},{name:"situacao",align:"left",style:"min-width: 120px",label:"Situação",field:"situacao",filterconfig:{tipo:"tablefiltersituacao",value:["0","1"],label:"",info:""}},{name:"dhcoleta",style:"width: 70px",align:"left",label:"Agendado",field:"dhcoleta"},{name:"dhbaixa",align:"left",label:"Coletado em",field:"dhbaixa"},{name:"clienteorigem",align:"left",label:"Cliente de origem",field:function(e){return e.clienteorigem.razaosocial}},{name:"enderecocoleta",align:"left",label:"Cidade da coleta",field:function(e){return e.enderecocoleta.cidade.cidade}},{name:"cidadedestino",align:"left",label:"Cidade destino",field:function(e){return e.clientedestino.cidade}}],loading:!1,posting:!1,error:null,usuario:null,customcnpj:null,customnumero:null,customchave:null}},created:function(){this.$eventbus.$on("coletasconsultaupdated",this.coletasconsultaupdated)},beforeDestroy:function(){this.$eventbus.$off("coletasconsultaupdated",this.coletasconsultaupdated)},mounted:function(){var e=this;return l()(n.a.mark((function t(){var o,a,i;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(o=e,a=new d["c"]("1"),e.optionsfilter=[],i=0;i<a.raw.length;i++)e.optionsfilter.push(a.raw[i]);return e.optionsfilter.push({value:null,desc:"Todos os registros",title:"Todos os registros",tooltip:"Remover todos os filtros e ver todos os registros",icon:"done_all",color:"grey-9",textcolor:"white"}),o.usuario=null,o.$store.state.usuario.logado&&o.$store.state.usuario.user&&(o.usuario=o.$store.state.usuario.user),o.$route.query&&o.queryRead(o.$route.query),t.next=10,o.refreshData(null);case 10:case"end":return t.stop()}}),t)})))()},methods:{actRastrear:function(e){var t=this;return l()(n.a.mark((function o(){var a,i;return n.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:a=null,i=null,e.notascount&&e.notascount>=1?a=e.notas[0].chave:e.nfe&&e.nfe.nNF>0&&(a=e.nfe.chave),e.clientedestino&&""!==e.clientedestino.cnpj&&(i=e.clientedestino.cnpj),a&&""!==a&&i&&""!==i&&t.$router.push({name:"rastrear.entrega",query:{chave:a,cnpj:i}});case 5:case"end":return o.stop()}}),o)})))()},coletasconsultaupdated:function(e){var t=this;return l()(n.a.mark((function o(){var a;return n.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return a=t,a.customfilter=parseInt(e),o.next=4,t.refreshData(null);case 4:case"end":return o.stop()}}),o)})))()},queryRead:function(e){var t=this;return l()(n.a.mark((function o(){var a,i,r;return n.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a=t,e)for(e.page&&(a.dataset.pagination.page=parseInt(e.page)),e.customfilter&&(a.customfilter=parseInt(e.customfilter),a.customfilter>0||(a.customfilter=null)),e.customcnpj&&(a.customcnpj=e.customcnpj),e.customnumero&&(a.customnumero=e.customnumero),e.customchave&&(a.customchave=e.customchave),i=0;i<a.columns.length;i++)r=a.columns[i],r.filterconfig&&("id"===r.name&&e.numero&&(r.filterconfig.value=a.$route.query.numero),"situacao"===r.name&&e.situacao&&(r.filterconfig.value=e.situacao.toString().split(",")),"clientedestino"===r.name&&e.clientedestino&&(r.filterconfig.value=e.clientedestino.toString().split(",")),"clienteorigem"===r.name&&e.clienteorigem&&(r.filterconfig.value=e.clienteorigem.toString().split(",")),"clienteorigem"===r.name&&e.clienteorigemstr&&(r.filterconfig.value2=e.clienteorigemstr),"regiao"===r.name&&e.regiaostr&&(r.filterconfig.value2=e.regiaostr),"enderecocoleta"===r.name&&e.enderecocoletastr&&(r.filterconfig.value2=e.enderecocoletastr),"clientedestino"===r.name&&e.clientedestinostr&&(r.filterconfig.value2=e.clientedestinostr),"cidadedestino"===r.name&&e.cidadedestinostr&&(r.filterconfig.value2=e.cidadedestinostr),"regiao"===r.name&&e.regiao&&(r.filterconfig.value=e.regiao.toString().split(",")),"enderecocoleta"===r.name&&e.cidades&&(r.filterconfig.value=e.cidades.toString().split(",")),"cidadedestino"===r.name&&e.cidadedestino&&(r.filterconfig.value=e.cidadedestino.toString().split(",")),"origem"===r.name&&e.origem&&(r.filterconfig.value=e.origem.toString().split(",")),"dhcoleta"===r.name&&(e.dhcoletai||e.dhcoletaf?r.filterconfig.value={dti:e.dhcoletai,dtf:e.dhcoletaf}:r.filterconfig.value=null),"motorista"===r.name&&("S"===e.semmotorista||e.motoristas)&&(r.filterconfig.value={ids:e.motoristas?e.motoristas.toString().split(","):null,semmotorista:e.semmotorista?e.semmotorista:null}),"peso"===r.name&&(e.pesoi||e.pesof?r.filterconfig.value={valuei:e.pesoi,valuef:e.pesof}:r.filterconfig.value=null),"dhbaixa"===r.name&&(e.dhbaixai||e.dhbaixaf?r.filterconfig.value={dti:e.dhbaixai,dtf:e.dhbaixaf}:r.filterconfig.value=null),"categ"===r.name&&(r.filterconfig.value=[],e.produtosperigosos&&r.filterconfig.value.push({field:"produtosperigosos",desc:"Produtos perigosos",value:"1"===e.produtosperigosos?"S":"N",sim:"Com produtos perigosos",nao:"Sem produtos perigosos"}),e.veiculoexclusico&&r.filterconfig.value.push({field:"veiculoexclusico",desc:"Veículo exclusivo",value:"1"===e.veiculoexclusico?"S":"N",sim:"Com veículo exclusivo",nao:"Sem veículo exclusivo"}),e.cargaurgente&&r.filterconfig.value.push({field:"cargaurgente",desc:"Carga urgente",value:"1"===e.cargaurgente?"S":"N",sim:"Com carga urgente",nao:"Sem carga urgente"})));case 2:case"end":return o.stop()}}),o)})))()},actEditDialog:function(e){var t=this;return l()(n.a.mark((function o(){var a,i,r,s;return n.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return a=t,i=a.rows[e],o.next=4,i.dialogAddOrEdit(a);case 4:if(r=o.sent,!r.ok){o.next=9;break}a.refreshData(null),o.next=13;break;case 9:if(!r.msg||""===r.msg){o.next=13;break}return s=a.$helpers.showDialog(r),o.next=13,s.then((function(){}));case 13:case"end":return o.stop()}}),o)})))()},actLoadMore:function(){var e=this;return l()(n.a.mark((function t(){var o,a;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e,o.loading=!0,t.next=4,o.dataset.loadmore();case 4:a=t.sent,a.ok&&(o.rows=o.dataset.itens),o.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},refreshData:function(e){var t=this;return l()(n.a.mark((function o(){var a,i,r,s,l;return n.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a=t,o.prev=1,a.loading=!0,a.error=null,a.usuario){o.next=6;break}throw new Error("Nenhum usuário logado");case 6:if(a.usuario.permitecoletasver){o.next=8;break}throw new Error("Sem permissão de acesso");case 8:return a.error=null,a.dataset.readPropsTable(e),a.dataset.customfilter=a.customfilter,delete a.dataset.customcnpj,"undefined"!==typeof a.customcnpj&&a.customcnpj&&""!==a.customcnpj&&(a.dataset.customcnpj=a.customcnpj),a.dataset.customnumero=a.customnumero,a.dataset.customchave=a.customchave,a.dataset.orderby=null,a.orderbylist&&(i=Object.keys(a.orderbylist).length,i>0&&(a.dataset.orderby=a.orderbylist)),o.next=19,a.dataset.fetch();case 19:if(r=o.sent,!r.ok){o.next=33;break}a.rows=a.dataset.itens,s={},null!==a.dataset.filter&&""!==a.dataset.filter&&(s.find=a.dataset.filter),null!==a.dataset.customfilter&&(s.customfilter=a.dataset.customfilter),a.dataset.customcnpj&&""!==a.dataset.customcnpj&&(s.customcnpj=a.dataset.customcnpj),null!==a.dataset.customnumero&&(s.customnumero=a.dataset.customnumero),null!==a.dataset.customchave&&(s.customchave=a.dataset.customchave),null!==a.dataset.pagination.page&&a.dataset.pagination.page>1&&(s.page=a.dataset.pagination.page),s.t=(new Date).getTime();try{a.$router.replace({name:a.$route.name,query:s,replace:!0,append:!1})}catch(n){console.error(n)}o.next=36;break;case 33:return l=a.$helpers.showDialog(r),o.next=36,l.then((function(){}));case 36:o.next=42;break;case 38:o.prev=38,o.t0=o["catch"](1),a.loading=!1,a.error=o.t0.message;case 42:a.loading=!1;case 43:case"end":return o.stop()}}),o,null,[[1,38]])})))()}}},p=u,m=o("2877"),f=o("9989"),v=o("54e1"),g=o("f09f"),_=o("a370"),w=o("27f9"),h=o("0016"),b=o("ddd8"),x=o("05c0"),q=o("66e5"),y=o("4074"),C=o("0170"),k=o("9c40"),$=o("eb85"),j=o("eaac"),S=o("357e"),D=o("db86"),E=o("de5e"),T=o("65c6"),N=o("6ac5"),I=o("eebe"),Q=o.n(I),R=Object(m["a"])(p,a,i,!1,null,null,null);t["default"]=R.exports;Q()(R,"components",{QPage:f["a"],QBanner:v["a"],QCard:g["a"],QCardSection:_["a"],QInput:w["a"],QIcon:h["a"],QSelect:b["a"],QTooltip:x["a"],QItem:q["a"],QItemSection:y["a"],QItemLabel:C["a"],QBtn:k["a"],QSeparator:$["a"],QTable:j["a"],QTh:S["a"],QTd:D["a"],QPageSticky:E["a"],QToolbar:T["a"],QToolbarTitle:N["a"]})}}]);