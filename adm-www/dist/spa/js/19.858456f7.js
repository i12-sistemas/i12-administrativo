(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"806d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-page",{},[a("div",{staticClass:"row doc-header",class:e.$q.platform.is.mobile?"":"q-pa-lg"},[a("div",{staticClass:"col-12"},[e.error?a("div",{staticClass:"col-12"},[a("q-banner",{staticClass:"bg-negative text-white"},[e._v(e._s(e.error))])],1):e._e(),e.rows&&e.rows.length>0?a("q-card",{staticClass:"bg-white q-mt-md",attrs:{flat:"",bordered:!e.$q.platform.is.mobile,square:e.$q.platform.is.mobile}},[e.$q.platform.is.mobile?a("q-separator"):e._e(),a("q-card-section",{staticClass:"q-pa-none"},[a("div",{staticStyle:{"max-width":"100vw"}},[a("q-table",{attrs:{data:e.rows,columns:e.columns,dense:!e.$q.platform.is.mobile,flat:"",loading:e.loading,color:"primary",id:"sticky-table",pagination:e.dataset.pagination,"row-key":"id","rows-per-page-options":e.$qtable.rowsperpageoptions},on:{"update:pagination":function(t){return e.$set(e.dataset,"pagination",t)},request:e.refreshData},scopedSlots:e._u([{key:"body-cell-sizebyte",fn:function(t){return[a("q-td",{attrs:{props:t}},[e._v("\n                      "+e._s(e.$helpers.bytesToHumanFileSizeString(t.row.sizebyte))+"\n                    ")])]}},{key:"body-cell-created_at",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("div",{staticClass:"cursor-pointer"},[e._v("\n                        "+e._s(e.$helpers.datetimeRelativeToday(t.row.created_at))+"\n                        "),a("q-tooltip",[a("div",[e._v("Criado em "+e._s(e.$helpers.datetimeToBR(t.row.created_at)))])])],1)])]}}],null,!1,2704358379)})],1)])],1):e._e(),a("q-page-sticky",{attrs:{position:"top",expand:""}},[a("q-toolbar",{staticClass:"bg-white text-primary shadow-up-21"},[a("q-btn",{attrs:{flat:"",dense:"",round:"","aria-label":"Menu",icon:"menu"},on:{click:function(t){return e.$store.dispatch("homedashboard/togglemenu")}}}),a("q-btn",{attrs:{flat:"",round:"",icon:"arrow_back"},on:{click:function(t){return e.$router.go(-1)}}}),e.$q.platform.is.mobile?e._e():a("q-separator",{attrs:{vertical:"",inset:"",spaced:""}}),a("q-toolbar-title",[e._v("Log de download - Tabela IBPT")]),a("q-btn",{attrs:{icon:"sync",label:e.$q.platform.is.mobile?"":"Atualizar",round:e.$q.platform.is.mobile,flat:"",loading:e.loading},on:{click:function(t){return e.refreshData(null)}}})],1)],1)],1)])])],1)},r=[],i=a("a34a"),s=a.n(i),o=(a("96cf"),a("c973")),l=a.n(o),u=a("970b"),c=a.n(u),p=a("5bc3"),d=a.n(p),f=a("2b0e"),m=(a("6b54"),a("06db"),function(){function e(t){c()(this,e),this.limpardados(),t&&this.cloneFrom(t)}return d()(e,[{key:"limpardados",value:function(){var e=l()(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.id=null,this.created_at=null,this.uf=null,this.filename=null,this.ip=null,this.urlcompleta=null,this.sizebyte=0,this.cnpj=null,this.usuario=null,this.sistema=null,this.ambiente=null;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cloneFrom",value:function(){var e=l()(s.a.mark((function e(t){var a;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=this,a.limpardados(),t){e.next=4;break}return e.abrupt("return");case 4:"undefined"!==typeof t.id&&(a.id=t.id),"undefined"!==typeof t.created_at&&(a.created_at=t.created_at),"undefined"!==typeof t.uf&&(a.uf=t.uf),"undefined"!==typeof t.filename&&(a.filename=t.filename),"undefined"!==typeof t.ip&&(a.ip=t.ip),"undefined"!==typeof t.urlcompleta&&(a.urlcompleta=t.urlcompleta),"undefined"!==typeof t.sizebyte&&(a.sizebyte=t.sizebyte),"undefined"!==typeof t.cnpj&&(a.cnpj=t.cnpj),"undefined"!==typeof t.usuario&&(a.usuario=t.usuario),"undefined"!==typeof t.sistema&&(a.sistema=t.sistema),"undefined"!==typeof t.ambiente&&(a.ambiente=t.ambiente.toString());case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),h=m,b=function(){function e(){c()(this,e),this.limpardados(),this.pagination={page:1,rowsPerPage:25,sortBy:"created_at",descending:!0,rowsNumber:0}}return d()(e,[{key:"limpardados",value:function(){var e=l()(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.itens=null;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"readPropsTable",value:function(e){if(e){var t=e.pagination,a=t.page,n=t.rowsPerPage,r=t.sortBy,i=t.descending,s=t.rowsNumber,o=e.filter;this.filter!==o&&(this.page=1),this.pagination={page:a,rowsPerPage:n,sortBy:r,descending:i,rowsNumber:s},this.filter=o}}},{key:"loadmore",value:function(){var e=l()(s.a.mark((function e(){var t;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.pagination.page=parseInt(this.pagination.page)+1,e.next=3,this.fetch(!0);case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetch",value:function(){var e=l()(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,a={perpage:t.pagination.rowsPerPage,page:t.pagination.page},t.itens=[],e.next=5,f["a"].prototype.$axios.get("v1/admin/tabelaibpt/logs",{params:a}).then((function(e){var a=e.data,n={ok:!1,msg:""};if(a&&(n.msg=a.msg?a.msg:"",a.ok&&(a=a.data,t.total=a.total?parseInt(a.total):0,t.pagination.page=a.current_page,t.pagination.rowsPerPage=parseInt(a.per_page),t.pagination.sortBy=a.sortby?a.sortby:"",t.pagination.descending="desc"===a.descending,t.pagination.rowsNumber=a.total?parseInt(a.total):0,n.ok=!0,t.itens=[],a.rows)))for(var r=0;r<a.rows.length;r++){var i=a.rows[r],s=new h(i);t.itens.push(s)}return n})).catch((function(e){return f["a"].prototype.$helpers.errorReturn(e)}));case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),g=b,w={name:"tabelaibpt.logs",components:{},data:function(){var e=new g;return{dataset:e,rows:[],columns:[{name:"uf",align:"left",label:"UF",field:"uf",sort:!0},{name:"ip",align:"left",label:"IP",field:"ip",sort:!0},{name:"sizebyte",align:"right",label:"Tamanho",field:"sizebyte",sort:!0},{name:"created_at",align:"left",label:"Baixado em",field:"created_at",sort:!0},{name:"ambiente",align:"left",label:"Ambiente",field:"ambiente",sort:!0},{name:"sistema",align:"left",label:"Sistema",field:"sistema",sort:!0},{name:"usuario",align:"left",label:"UsuÃ¡rio",field:"usuario",sort:!0},{name:"cnpj",align:"left",label:"Cliente/CNPJ",field:"cnpj",sort:!0}],loading:!1}},mounted:function(){var e=this;return l()(s.a.mark((function t(){var a;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.refreshData(null);case 3:case"end":return t.stop()}}),t)})))()},methods:{refreshData:function(e){var t=this;return l()(s.a.mark((function a(){var n,r,i;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t,a.prev=1,n.loading=!0,n.error=null,n.error=null,n.dataset.readPropsTable(e),a.next=8,n.dataset.fetch();case 8:if(r=a.sent,!r.ok){a.next=13;break}n.rows=n.dataset.itens,a.next=16;break;case 13:return i=n.$helpers.showDialog(r),a.next=16,i.then((function(){}));case 16:a.next=22;break;case 18:a.prev=18,a.t0=a["catch"](1),n.loading=!1,n.error=a.t0.message;case 22:n.loading=!1;case 23:case"end":return a.stop()}}),a,null,[[1,18]])})))()}}},y=w,v=a("2877"),k=a("9989"),q=a("54e1"),_=a("f09f"),x=a("eb85"),$=a("a370"),P=a("eaac"),T=a("db86"),C=a("05c0"),Q=a("de5e"),z=a("65c6"),B=a("9c40"),S=a("6ac5"),j=a("eebe"),I=a.n(j),D=Object(v["a"])(y,n,r,!1,null,null,null);t["default"]=D.exports;I()(D,"components",{QPage:k["a"],QBanner:q["a"],QCard:_["a"],QSeparator:x["a"],QCardSection:$["a"],QTable:P["a"],QTd:T["a"],QTooltip:C["a"],QPageSticky:Q["a"],QToolbar:z["a"],QBtn:B["a"],QToolbarTitle:S["a"]})}}]);