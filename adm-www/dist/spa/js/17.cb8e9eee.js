(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{b5d1:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-page",{},[a("div",{staticClass:"full-width header-top-bg bg-primary shadow-up-21"}),a("div",{staticClass:"row doc-header "},[a("div",{staticClass:"col-sm-12",class:e.$q.platform.is.mobile?"":"q-pa-lg"},[e.error?a("div",{staticClass:"col-12"},[a("q-banner",{staticClass:"bg-negative text-white"},[e._v(e._s(e.error))])],1):e._e(),a("q-card",{staticClass:"bg-white ",class:e.$q.platform.is.mobile?"q-ma-sm":"",attrs:{flat:"",bordered:""}},[a("q-card-section",[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-md-6 col-xs-12"},[a("q-input",{attrs:{outlined:"",debounce:"700",placeholder:"Informe qualquer Informação para pesquisar",label:"Procurar",clearable:"",dense:!e.$q.platform.is.mobile,hint:"Ex.: CNPJ, nome do cliente e etc..."},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),a("div",{staticClass:"col-xs-12 col-md-3"},[a("q-select",{staticClass:"q-mr-xs",attrs:{label:"Status",outlined:"","emit-value":"","stack-label":"","map-options":"",dense:!e.$q.platform.is.mobile,options:[{value:"2",label:"Todos"},{value:"1",label:"Ativos"},{value:"0",label:"Inativo"}]},model:{value:e.filterstatus,callback:function(t){e.filterstatus=t},expression:"filterstatus"}})],1),a("div",{staticClass:"col-12"},[a("div",{staticClass:"q-gutter-sm"},e._l(e.opcoesNivel.options,(function(t,r){return a("q-checkbox",{key:"nivel"+r,attrs:{val:t.value,label:t.desc,color:t.color},model:{value:e.filternivel,callback:function(t){e.filternivel=t},expression:"filternivel"}})})),1)])])]),a("q-card-section",[a("q-btn",{attrs:{unelevated:"",label:"Consultar",color:"primary",icon:"search",loading:e.loading},on:{click:function(t){return e.refreshData(null)}}})],1)],1),e.rows&&e.rows.length>0?a("q-card",{staticClass:"bg-white q-mt-md",attrs:{flat:"",bordered:!e.$q.platform.is.mobile,square:e.$q.platform.is.mobile}},[e.$q.platform.is.mobile?a("q-separator"):e._e(),a("q-card-section",{staticClass:"q-pa-none"},[a("div",{staticStyle:{"max-width":"100vw"}},[a("q-table",{attrs:{data:e.rows,columns:e.columns,dense:!e.$q.platform.is.mobile,flat:"",loading:e.loading,color:"primary",id:"sticky-table",pagination:e.dataset.pagination,"row-key":"id","rows-per-page-options":e.$qtable.rowsperpageoptions,filter:e.filter},on:{"update:pagination":function(t){return e.$set(e.dataset,"pagination",t)},request:e.refreshData},scopedSlots:e._u([{key:"body-cell-action",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("q-btn",{attrs:{flat:"",round:"",dense:!e.$q.platform.is.mobile,size:e.$q.platform.is.mobile?"12px":"8px",icon:"edit",to:{name:"backup.cliente.detalhe"}}},[a("q-tooltip",[e._v("Ver backups do cliente")])],1)],1)]}},{key:"body-cell-cliente",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("div",{staticClass:"cursor-pointer",class:t.row.cliente.ativo?"":"text-red"},[a("div",{staticClass:"ellipsis"},[t.row.cliente.ativo?e._e():a("span",{staticClass:"bg-red-1 text-red rounded-borders q-pa-xs text-caption"},[e._v("Inativo")]),a("span",[e._v("\n                              "+e._s(t.row.cliente.fantasia&&""!==t.row.cliente.fantasia?t.row.cliente.fantasia:t.row.cliente.nome)+"\n                            ")]),t.row.cliente.fantasia&&""!==t.row.cliente.fantasia?a("span",{staticClass:"q-ml-md text-caption text-grey-7"},[e._v(e._s(e.$helpers.strEllipsis(t.row.cliente.nome,30)))]):e._e()])]),a("q-tooltip",{attrs:{delay:700}},[a("div",[e._v(e._s(t.row.cliente.fantasia))]),a("div",[e._v(e._s(t.row.cliente.nome))]),a("div",[e._v("Documento: "+e._s(t.row.cliente.doc))]),a("div",[e._v("Id: "+e._s(t.row.cliente.id))]),a("div",[e._v(e._s(t.row.cliente.cidade+" - "+t.row.cliente.uf))])])],1)]}},{key:"body-cell-cidade",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("div",{staticClass:"cursor-pointer"},[t.row.cliente.cidade?a("div",{staticClass:"ellipsis"},[e._v(e._s(t.row.cliente.cidade+" - "+t.row.cliente.uf))]):e._e()]),a("q-tooltip",{attrs:{delay:700}},[a("div",[e._v(e._s(t.row.cliente.cidade+" - "+t.row.cliente.uf))])])],1)]}},{key:"body-cell-totalsize",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("div",{staticClass:"cursor-pointer"},[a("div",{},[e._v(e._s(e.$helpers.bytesToHumanFileSizeString(t.row.totalsize)))]),a("q-tooltip",{attrs:{delay:700}},[a("div",[e._v(e._s(e.$helpers.bytesToHumanFileSizeString(t.row.totalsize)))]),a("div",[e._v(e._s(e.$helpers.formatRS(t.row.qtdearquivos,"",0))+" arquivos")])])],1)])]}},{key:"body-cell-controlabkp",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("div",{staticClass:"cursor-pointer"},[t.row.cliente&&t.row.cliente.controlabkp?a("div",[a("q-avatar",{attrs:{size:"24px","font-size":"20px","text-color":t.row.cliente.controlabkp.color?t.row.cliente.controlabkp.color:"black",color:"grey-3",icon:t.row.cliente.controlabkp.icon}}),a("q-tooltip",{attrs:{delay:700}},[e._v("\n                            "+e._s(t.row.cliente.controlabkp.memo)+"\n                          ")])],1):e._e()])])]}},{key:"body-cell-qtdearquivos",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("div",{staticClass:"cursor-pointer"},[a("div",{staticClass:"text-caption text-grey-7"},[e._v(e._s(e.$helpers.formatRS(t.row.qtdearquivos,"",0)))]),a("q-tooltip",{attrs:{delay:700}},[a("div",[e._v(e._s(e.$helpers.bytesToHumanFileSizeString(t.row.totalsize)))]),a("div",[e._v(e._s(e.$helpers.formatRS(t.row.qtdearquivos,"",0))+" arquivos")])])],1)])]}},{key:"body-cell-ultimolastmodified",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("div",[t.row.ultimolastmodified?a("div",[a("div",[e._v(e._s(e.$helpers.datetimeRelativeToday(t.row.ultimolastmodified)))]),a("q-tooltip",[t.row.ultimolastmodified?a("div",[e._v("Último backup em "+e._s(e.$helpers.datetimeToBR(t.row.ultimolastmodified,!1,!0)))]):e._e()])],1):e._e()])])]}}],null,!1,375259417)})],1)])],1):e._e(),a("q-page-sticky",{attrs:{position:"top",expand:""}},[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-btn",{attrs:{flat:"",dense:"",round:"","aria-label":"Menu",icon:"menu"},on:{click:function(t){return e.$store.dispatch("homedashboard/togglemenu")}}}),a("q-btn",{attrs:{flat:"",round:"",icon:"arrow_back"},on:{click:function(t){return e.$router.go(-1)}}}),e.$q.platform.is.mobile?e._e():a("q-separator",{attrs:{vertical:"",inset:"",spaced:""}}),a("q-toolbar-title",[e._v("Consulta de backup")]),a("q-btn",{attrs:{icon:"search",round:e.$q.platform.is.mobile,flat:"",loading:e.loading},on:{click:function(t){return e.refreshData(null)}}})],1)],1)],1)])])],1)},i=[],l=(a("7f7f"),a("a481"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("7514"),a("28a5"),a("a34a")),o=a.n(l),n=(a("96cf"),a("c973")),s=a.n(n),c=a("eb45"),d=a("5a5b"),u={name:"servidores.index",components:{},data:function(){var e=new c["a"],t=new d["a"];return{dataset:t,opcoesNivel:e,rows:[],filternivel:["8","1","2"],filterstatus:"1",filter:"",columns:[{name:"action",align:"left",label:"*",field:"id"},{name:"cliente",align:"left",label:"Cliente",field:"cliente",filterconfig:{value:null}},{name:"cidade",align:"left",label:"Cidade",field:"cidade",filterconfig:{value:null}},{name:"ultimolastmodified",align:"center",label:"Último backup",field:"ultimolastmodified"},{name:"controlabkp",align:"center",label:"Nível",field:"controlabkp"},{name:"qtdearquivos",align:"right",label:"Qtde",field:"qtdearquivos",filterconfig:{value:null}},{name:"totalsize",align:"right",label:"Arquivos",field:"totalsize",filterconfig:{value:null}}],loading:!1,posting:!1,error:null}},mounted:function(){var e=this;return s()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,!a.$route.query){t.next=4;break}return t.next=4,a.queryRead(a.$route.query);case 4:return t.next=6,a.refreshData(null);case 6:case"end":return t.stop()}}),t)})))()},methods:{queryRead:function(e){var t=this;return s()(o.a.mark((function a(){var r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=t,e&&(e.page&&(r.dataset.pagination.page=parseInt(e.page)),e.status&&(r.filterstatus=e.status),e.nivel&&(r.filternivel=e.nivel.split(",")),e.find&&(r.filter=e.find));case 2:case"end":return a.stop()}}),a)})))()},actEditDialog:function(e){var t=this;return s()(o.a.mark((function a(){var r,i,l,n;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t,i=r.rows[e],a.next=4,i.dialogAddOrEdit(r);case 4:if(l=a.sent,!l.ok){a.next=9;break}r.refreshData(null),a.next=13;break;case 9:if(!l.msg||""===l.msg){a.next=13;break}return n=r.$helpers.showDialog(l),a.next=13,n.then((function(){}));case 13:case"end":return a.stop()}}),a)})))()},actLoadMore:function(){var e=this;return s()(o.a.mark((function t(){var a,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,a.loading=!0,t.next=4,a.dataset.loadmore();case 4:r=t.sent,r.ok&&(a.rows=a.dataset.itens),a.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},refreshData:function(e){var t=this;return s()(o.a.mark((function a(){var r,i,l,n,s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t,a.prev=1,r.loading=!0,r.error=null,r.error=null,r.dataset.readPropsTable(e),r.dataset.filter=r.filter,r.dataset.status=r.filterstatus,r.dataset.nivel=r.filternivel,r.dataset.orderby=null,r.orderbylist&&(i=Object.keys(r.orderbylist).length,i>0&&(r.dataset.orderby=r.orderbylist)),a.next=13,r.dataset.fetchPorCliente();case 13:if(l=a.sent,!l.ok){a.next=25;break}r.rows=r.dataset.itens,n={},null!==r.dataset.filter&&""!==r.dataset.filter&&(n.find=r.dataset.filter),null!==r.dataset.status&&(n.status=r.dataset.status),null!==r.dataset.nivel&&(n.nivel=r.dataset.nivel.join(",")),null!==r.dataset.pagination.page&&r.dataset.pagination.page>1&&(n.page=r.dataset.pagination.page),n.t=(new Date).getTime();try{r.$router.replace({name:r.$route.name,query:n,replace:!0,append:!1})}catch(o){console.error(o)}a.next=28;break;case 25:return s=r.$helpers.showDialog(l),a.next=28,s.then((function(){}));case 28:a.next=34;break;case 30:a.prev=30,a.t0=a["catch"](1),r.loading=!1,r.error=a.t0.message;case 34:r.loading=!1;case 35:case"end":return a.stop()}}),a,null,[[1,30]])})))()}}},p=u,f=a("2877"),v=a("9989"),m=a("54e1"),b=a("f09f"),q=a("a370"),w=a("27f9"),g=a("0016"),h=a("ddd8"),_=a("8f8e"),k=a("9c40"),y=a("eb85"),x=a("eaac"),C=a("db86"),$=a("05c0"),Q=a("cb32"),S=a("de5e"),T=a("65c6"),z=a("6ac5"),D=a("eebe"),I=a.n(D),R=Object(f["a"])(p,r,i,!1,null,null,null);t["default"]=R.exports;I()(R,"components",{QPage:v["a"],QBanner:m["a"],QCard:b["a"],QCardSection:q["a"],QInput:w["a"],QIcon:g["a"],QSelect:h["a"],QCheckbox:_["a"],QBtn:k["a"],QSeparator:y["a"],QTable:x["a"],QTd:C["a"],QTooltip:$["a"],QAvatar:Q["a"],QPageSticky:S["a"],QToolbar:T["a"],QToolbarTitle:z["a"]})}}]);